{"version":3,"names":["React","useState","useEffect","Image","TouchableOpacity","View","ZegoUIKitInternal","zloginfo","ZegoToggleCameraButton","props","userID","iconCameraOn","iconCameraOff","isOn","onPress","width","height","isCurrentOn","setIsCurrentOn","getImageSourceByPath","pathOn","require","pathOff","onButtonPress","turnCameraDeviceOn","isCameraDeviceOn","callbackID","String","Math","floor","random","onCameraDeviceOn","id","on","undefined","getLocalUserInfo","onSDKConnected"],"sources":["ZegoToggleCameraButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Image, TouchableOpacity, View } from \"react-native\";\nimport ZegoUIKitInternal from \"../internal/ZegoUIKitInternal\";\nimport { zloginfo } from \"../../utils/logger\";\n\nexport default function ZegoToggleCameraButton(props) {\n    const { userID, iconCameraOn, iconCameraOff, isOn, onPress, width = 48, height = 48 } = props;\n    const [isCurrentOn, setIsCurrentOn] = useState(true);// Default on\n    const getImageSourceByPath = () => {\n        const pathOn = iconCameraOn ? iconCameraOn : require(\"../internal/resources/white_button_camera_on.png\");\n        const pathOff = iconCameraOff ? iconCameraOff : require(\"../internal/resources/white_button_camera_off.png\");\n        return isCurrentOn ? pathOn : pathOff;\n    }\n    const onButtonPress = () => {\n        ZegoUIKitInternal.turnCameraDeviceOn(userID, !isCurrentOn);\n        if (typeof onPress == 'function') {\n            onPress();\n        }\n    }\n\n    useEffect(() => {\n        setIsCurrentOn(ZegoUIKitInternal.isCameraDeviceOn(userID));\n    });\n    useEffect(() => {\n        const callbackID = 'ZegoToggleCameraButton' + String(Math.floor(Math.random() * 10000));\n        ZegoUIKitInternal.onCameraDeviceOn(callbackID, (id, on) => {\n            if (userID === undefined || userID === '') { // local user\n                if (id == ZegoUIKitInternal.getLocalUserInfo().userID) {\n                    setIsCurrentOn(on);\n                }\n            }\n            else if (id == userID) {\n                setIsCurrentOn(on);\n            }\n        });\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            ZegoUIKitInternal.turnCameraDeviceOn(userID, isOn);\n            setIsCurrentOn(ZegoUIKitInternal.isCameraDeviceOn(userID))\n        });\n        return () => {\n            ZegoUIKitInternal.onCameraDeviceOn(callbackID);\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n        }\n    }, []);\n\n    return (<TouchableOpacity\n        style={{ width: width, height: height }}\n        onPress={onButtonPress}>\n        <Image resizeMode='contain' source={getImageSourceByPath()} style={{ width: \"100%\", height: \"100%\" }} />\n    </TouchableOpacity>)\n}"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,gBAAhB,EAAkCC,IAAlC,QAA8C,cAA9C;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,eAAe,SAASC,sBAAT,CAAgCC,KAAhC,EAAuC;EAClD,MAAM;IAAEC,MAAF;IAAUC,YAAV;IAAwBC,aAAxB;IAAuCC,IAAvC;IAA6CC,OAA7C;IAAsDC,KAAK,GAAG,EAA9D;IAAkEC,MAAM,GAAG;EAA3E,IAAkFP,KAAxF;EACA,MAAM,CAACQ,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,IAAD,CAA9C,CAFkD,CAEG;;EACrD,MAAMkB,oBAAoB,GAAG,MAAM;IAC/B,MAAMC,MAAM,GAAGT,YAAY,GAAGA,YAAH,GAAkBU,OAAO,CAAC,kDAAD,CAApD;IACA,MAAMC,OAAO,GAAGV,aAAa,GAAGA,aAAH,GAAmBS,OAAO,CAAC,mDAAD,CAAvD;IACA,OAAOJ,WAAW,GAAGG,MAAH,GAAYE,OAA9B;EACH,CAJD;;EAKA,MAAMC,aAAa,GAAG,MAAM;IACxBjB,iBAAiB,CAACkB,kBAAlB,CAAqCd,MAArC,EAA6C,CAACO,WAA9C;;IACA,IAAI,OAAOH,OAAP,IAAkB,UAAtB,EAAkC;MAC9BA,OAAO;IACV;EACJ,CALD;;EAOAZ,SAAS,CAAC,MAAM;IACZgB,cAAc,CAACZ,iBAAiB,CAACmB,gBAAlB,CAAmCf,MAAnC,CAAD,CAAd;EACH,CAFQ,CAAT;EAGAR,SAAS,CAAC,MAAM;IACZ,MAAMwB,UAAU,GAAG,2BAA2BC,MAAM,CAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAA3B,CAAD,CAApD;IACAxB,iBAAiB,CAACyB,gBAAlB,CAAmCL,UAAnC,EAA+C,CAACM,EAAD,EAAKC,EAAL,KAAY;MACvD,IAAIvB,MAAM,KAAKwB,SAAX,IAAwBxB,MAAM,KAAK,EAAvC,EAA2C;QAAE;QACzC,IAAIsB,EAAE,IAAI1B,iBAAiB,CAAC6B,gBAAlB,GAAqCzB,MAA/C,EAAuD;UACnDQ,cAAc,CAACe,EAAD,CAAd;QACH;MACJ,CAJD,MAKK,IAAID,EAAE,IAAItB,MAAV,EAAkB;QACnBQ,cAAc,CAACe,EAAD,CAAd;MACH;IACJ,CATD;IAUA3B,iBAAiB,CAAC8B,cAAlB,CAAiCV,UAAjC,EAA6C,MAAM;MAC/CpB,iBAAiB,CAACkB,kBAAlB,CAAqCd,MAArC,EAA6CG,IAA7C;MACAK,cAAc,CAACZ,iBAAiB,CAACmB,gBAAlB,CAAmCf,MAAnC,CAAD,CAAd;IACH,CAHD;IAIA,OAAO,MAAM;MACTJ,iBAAiB,CAACyB,gBAAlB,CAAmCL,UAAnC;MACApB,iBAAiB,CAAC8B,cAAlB,CAAiCV,UAAjC;IACH,CAHD;EAIH,CApBQ,EAoBN,EApBM,CAAT;EAsBA,oBAAQ,oBAAC,gBAAD;IACJ,KAAK,EAAE;MAAEX,KAAK,EAAEA,KAAT;MAAgBC,MAAM,EAAEA;IAAxB,CADH;IAEJ,OAAO,EAAEO;EAFL,gBAGJ,oBAAC,KAAD;IAAO,UAAU,EAAC,SAAlB;IAA4B,MAAM,EAAEJ,oBAAoB,EAAxD;IAA4D,KAAK,EAAE;MAAEJ,KAAK,EAAE,MAAT;MAAiBC,MAAM,EAAE;IAAzB;EAAnE,EAHI,CAAR;AAKH"}