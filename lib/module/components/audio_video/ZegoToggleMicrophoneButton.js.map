{"version":3,"names":["React","useState","useEffect","Image","TouchableOpacity","View","ZegoUIKitInternal","ZegoToggleMicrophoneButton","props","userID","iconMicOn","iconMicOff","isOn","onPress","width","height","isCurrentOn","setIsCurrentOn","getImageSourceByPath","pathOn","require","pathOff","onButtonPress","turnMicDeviceOn","isMicDeviceOn","callbackID","String","Math","floor","random","onSDKConnected","onMicDeviceOn","id","on","undefined","getLocalUserInfo"],"sources":["ZegoToggleMicrophoneButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Image, TouchableOpacity, View } from \"react-native\";\nimport ZegoUIKitInternal from \"../internal/ZegoUIKitInternal\";\n\nexport default function ZegoToggleMicrophoneButton(props) {\n    const { userID, iconMicOn, iconMicOff, isOn, onPress, width = 48, height = 48 } = props;\n    const [isCurrentOn, setIsCurrentOn] = useState(true);// Default on\n    const getImageSourceByPath = () => {\n        const pathOn = iconMicOn ? iconMicOn : require(\"../internal/resources/white_button_mic_on.png\");\n        const pathOff = iconMicOff ? iconMicOff : require(\"../internal/resources/white_button_mic_off.png\");\n        return isCurrentOn ? pathOn : pathOff;\n    }\n    const onButtonPress = () => {\n        ZegoUIKitInternal.turnMicDeviceOn(userID, !isCurrentOn);\n        if (typeof onPress == 'function') {\n            onPress();\n        }\n    }\n\n\n    useEffect(() => {\n        setIsCurrentOn(ZegoUIKitInternal.isMicDeviceOn(userID));\n    });\n    useEffect(() => {\n        const callbackID = 'ZegoToggleMicrophoneButton' + String(Math.floor(Math.random() * 10000));\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            ZegoUIKitInternal.turnMicDeviceOn(userID, isOn);\n            setIsCurrentOn(ZegoUIKitInternal.isMicDeviceOn(userID))\n        });\n        ZegoUIKitInternal.onMicDeviceOn(callbackID, (id, on) => {\n            if (userID === undefined || userID === '') { // local user\n                if (id == ZegoUIKitInternal.getLocalUserInfo().userID) {\n                    setIsCurrentOn(on);\n                }\n            }\n            else if (id == userID) {\n                setIsCurrentOn(on);\n            }\n        });\n        return () => {\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n            ZegoUIKitInternal.onMicDeviceOn(callbackID);\n        }\n    }, [])\n    return (<TouchableOpacity\n        style={{ width: width, height: height }}\n        onPress={onButtonPress}>\n        <Image resizeMode='contain' source={getImageSourceByPath()} style={{ width: \"100%\", height: \"100%\" }} />\n    </TouchableOpacity>)\n}"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,gBAAhB,EAAkCC,IAAlC,QAA8C,cAA9C;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AAEA,eAAe,SAASC,0BAAT,CAAoCC,KAApC,EAA2C;EACtD,MAAM;IAAEC,MAAF;IAAUC,SAAV;IAAqBC,UAArB;IAAiCC,IAAjC;IAAuCC,OAAvC;IAAgDC,KAAK,GAAG,EAAxD;IAA4DC,MAAM,GAAG;EAArE,IAA4EP,KAAlF;EACA,MAAM,CAACQ,WAAD,EAAcC,cAAd,IAAgChB,QAAQ,CAAC,IAAD,CAA9C,CAFsD,CAED;;EACrD,MAAMiB,oBAAoB,GAAG,MAAM;IAC/B,MAAMC,MAAM,GAAGT,SAAS,GAAGA,SAAH,GAAeU,OAAO,CAAC,+CAAD,CAA9C;IACA,MAAMC,OAAO,GAAGV,UAAU,GAAGA,UAAH,GAAgBS,OAAO,CAAC,gDAAD,CAAjD;IACA,OAAOJ,WAAW,GAAGG,MAAH,GAAYE,OAA9B;EACH,CAJD;;EAKA,MAAMC,aAAa,GAAG,MAAM;IACxBhB,iBAAiB,CAACiB,eAAlB,CAAkCd,MAAlC,EAA0C,CAACO,WAA3C;;IACA,IAAI,OAAOH,OAAP,IAAkB,UAAtB,EAAkC;MAC9BA,OAAO;IACV;EACJ,CALD;;EAQAX,SAAS,CAAC,MAAM;IACZe,cAAc,CAACX,iBAAiB,CAACkB,aAAlB,CAAgCf,MAAhC,CAAD,CAAd;EACH,CAFQ,CAAT;EAGAP,SAAS,CAAC,MAAM;IACZ,MAAMuB,UAAU,GAAG,+BAA+BC,MAAM,CAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAA3B,CAAD,CAAxD;IACAvB,iBAAiB,CAACwB,cAAlB,CAAiCL,UAAjC,EAA6C,MAAM;MAC/CnB,iBAAiB,CAACiB,eAAlB,CAAkCd,MAAlC,EAA0CG,IAA1C;MACAK,cAAc,CAACX,iBAAiB,CAACkB,aAAlB,CAAgCf,MAAhC,CAAD,CAAd;IACH,CAHD;IAIAH,iBAAiB,CAACyB,aAAlB,CAAgCN,UAAhC,EAA4C,CAACO,EAAD,EAAKC,EAAL,KAAY;MACpD,IAAIxB,MAAM,KAAKyB,SAAX,IAAwBzB,MAAM,KAAK,EAAvC,EAA2C;QAAE;QACzC,IAAIuB,EAAE,IAAI1B,iBAAiB,CAAC6B,gBAAlB,GAAqC1B,MAA/C,EAAuD;UACnDQ,cAAc,CAACgB,EAAD,CAAd;QACH;MACJ,CAJD,MAKK,IAAID,EAAE,IAAIvB,MAAV,EAAkB;QACnBQ,cAAc,CAACgB,EAAD,CAAd;MACH;IACJ,CATD;IAUA,OAAO,MAAM;MACT3B,iBAAiB,CAACwB,cAAlB,CAAiCL,UAAjC;MACAnB,iBAAiB,CAACyB,aAAlB,CAAgCN,UAAhC;IACH,CAHD;EAIH,CApBQ,EAoBN,EApBM,CAAT;EAqBA,oBAAQ,oBAAC,gBAAD;IACJ,KAAK,EAAE;MAAEX,KAAK,EAAEA,KAAT;MAAgBC,MAAM,EAAEA;IAAxB,CADH;IAEJ,OAAO,EAAEO;EAFL,gBAGJ,oBAAC,KAAD;IAAO,UAAU,EAAC,SAAlB;IAA4B,MAAM,EAAEJ,oBAAoB,EAAxD;IAA4D,KAAK,EAAE;MAAEJ,KAAK,EAAE,MAAT;MAAiBC,MAAM,EAAE;IAAzB;EAAnE,EAHI,CAAR;AAKH"}