{"version":3,"names":["ZegoUIKitInternal","ZegoChangedCountOrProperty","ZegoUIKitPluginType","ZegoUIKitCorePlugin","zlogerror","zloginfo","ZegoInvitationImplResult","ZegoUIKitSignalingPlugin","_localUser","_queryCount","_onRoomPropertiesFullUpdatedCallbackMap","_usersInRoomAttributes","Map","_roomAttributes","_queryUsersInRoomAttributesIteration","nextFlag","count","getInstance","invoke","_queryUsersInRoomAttributesFully","fullAttributes","Promise","resolve","reject","then","resNextFlag","infos","push","catch","error","_updateCoreUserAndNofityChanges","editor","shouldNotifyChange","forEach","info","coreUser","getUser","userID","JSON","stringify","inRoomAttributes","attributes","Object","assign","notifyUserInfoUpdate","notifyUserCountOrPropertyChanged","attributesUpdate","_notifyRoomPropertiesFullUpdated","notifyData","keys","callbackID","ZegoUIKitSignalingPluginImpl","getVersion","init","appID","appSign","getPlugin","signaling","uninit","login","userName","logout","enableNotifyWhenAppRunningInBackgroundOrQuit","enable","isIOSDevelopmentEnvironment","sendInvitation","invitees","timeout","type","data","notificationConfig","inviterName","cancelInvitation","refuseInvitation","inviterID","acceptInvitation","onConnectionStateChanged","callback","registerPluginEventHandler","onInvitationReceived","onInvitationTimeout","onInvitationResponseTimeout","onInvitationAccepted","onInvitationRefused","onInvitationCanceled","joinRoom","roomID","setUsersInRoomAttributes","key","value","userIDs","errorUserList","length","get","set","queryUsersInRoomAttributes","clear","element","usersInRoomAttributes","onUsersInRoomAttributesUpdated","oldAttributes","Array","from","parse","updateKeys","includes","temp","updateRoomProperty","isDeleteAfterOwnerLeft","isForce","isUpdateOwner","errorKeys","deleteRoomProperties","beginRoomPropertiesBatchOperation","endRoomPropertiesBatchOperation","queryRoomProperties","roomAttributes","onRoomPropertyUpdated","oldRoomAttributes","action","oldValue","onRoomPropertiesFullUpdated","onInRoomTextMessageReceived","messageList","fromConversationID","map","message","messageID","timestamp","orderKey","senderUserID","text"],"sources":["index.js"],"sourcesContent":["import ZegoUIKitInternal from '../../../components/internal/ZegoUIKitInternal';\nimport { ZegoChangedCountOrProperty, ZegoUIKitPluginType } from '../../../components/internal/defines';\nimport ZegoUIKitCorePlugin from '../../../components/internal/ZegoUIKitCorePlugin';\nimport { zlogerror, zloginfo } from '../../../utils/logger';\nimport { ZegoInvitationImplResult } from './defines';\n\nvar ZegoUIKitSignalingPlugin;\nconst _localUser = {};\nconst _queryCount = 20;\nconst _onRoomPropertiesFullUpdatedCallbackMap = {};\nconst _usersInRoomAttributes = new Map(); // <userID, attributes> attributes={ string, string }\nlet _roomAttributes = {};\n\n\n// ------- live audio room ------\nconst _queryUsersInRoomAttributesIteration = (\n  nextFlag = '',\n  count = _queryCount\n) => {\n  return ZegoUIKitSignalingPlugin.getInstance().invoke(\n    'queryUsersInRoomAttributes',\n    {\n      nextFlag,\n      count,\n    }\n  );\n};\nconst _queryUsersInRoomAttributesFully = (nextFlag, count) => {\n  const fullAttributes = [];\n  return new Promise((resolve, reject) => {\n    _queryUsersInRoomAttributesIteration(nextFlag, count)\n      .then(({ nextFlag: resNextFlag, infos }) => {\n        fullAttributes.push(...infos);\n        if (resNextFlag) {\n          _queryUsersInRoomAttributesIteration(resNextFlag);\n        } else {\n          resolve(fullAttributes);\n        }\n      })\n      .catch((error) => {\n        reject(error);\n      });\n  });\n};\nconst _updateCoreUserAndNofityChanges = (infos, editor) => {\n  let shouldNotifyChange = false;\n  infos.forEach((info) => {\n    const coreUser = ZegoUIKitInternal.getUser(info.userID);\n    if (coreUser) {\n      if (\n        JSON.stringify(coreUser.inRoomAttributes) !==\n        JSON.stringify(info.attributes)\n      ) {\n        shouldNotifyChange = true;\n        // merge\n        Object.assign(coreUser.inRoomAttributes, info.attributes);\n        ZegoUIKitInternal.notifyUserInfoUpdate(info.userID);\n      }\n    }\n  });\n  if (shouldNotifyChange) {\n    zloginfo(\n      '[Plugins][invitation]Notify changed property of users successfully.'\n    );\n    ZegoUIKitInternal.notifyUserCountOrPropertyChanged(\n      ZegoChangedCountOrProperty.attributesUpdate\n    );\n  }\n};\nconst _notifyRoomPropertiesFullUpdated = (...notifyData) => {\n  Object.keys(_onRoomPropertiesFullUpdatedCallbackMap).forEach((callbackID) => {\n    if (_onRoomPropertiesFullUpdatedCallbackMap[callbackID]) {\n      _onRoomPropertiesFullUpdatedCallbackMap[callbackID](...notifyData);\n    }\n  });\n};\n\nconst ZegoUIKitSignalingPluginImpl = {\n  getVersion: () => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getVersion();\n  },\n  init: (appID, appSign) => {\n    ZegoUIKitSignalingPlugin = ZegoUIKitCorePlugin.getPlugin(\n      ZegoUIKitPluginType.signaling\n    );\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().invoke('init', { appID, appSign });\n  },\n  uninit: () => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().invoke('uninit');\n  },\n  login: (userID, userName) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    _localUser.userID = userID;\n    _localUser.userName = userName;\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('login', {\n      userID,\n      userName,\n    });\n  },\n  logout: () => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('logout');\n  },\n  enableNotifyWhenAppRunningInBackgroundOrQuit: (enable, isIOSDevelopmentEnvironment) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('enableNotifyWhenAppRunningInBackgroundOrQuit', {\n      enable,\n      isIOSDevelopmentEnvironment\n    });\n  },\n  sendInvitation: (invitees, timeout, type, data, notificationConfig) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('sendInvitation', {\n      inviterName: _localUser.userName,\n      invitees,\n      timeout,\n      type,\n      data,\n      notificationConfig\n    });\n  },\n  cancelInvitation: (invitees, data) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('cancelInvitation', {\n      invitees,\n      data,\n    });\n  },\n  refuseInvitation: (inviterID, data) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('refuseInvitation', {\n      inviterID,\n      data,\n    });\n  },\n  acceptInvitation: (inviterID, data) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return Promise.reject();\n    }\n    return ZegoUIKitSignalingPlugin.getInstance().invoke('acceptInvitation', {\n      inviterID,\n      data,\n    });\n  },\n  onConnectionStateChanged: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'connectionStateChanged',\n      callbackID,\n      callback\n    );\n  },\n  onInvitationReceived: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'invitationReceived',\n      callbackID,\n      callback\n    );\n  },\n  onInvitationTimeout: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'invitationTimeout',\n      callbackID,\n      callback\n    );\n  },\n  onInvitationResponseTimeout: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'invitationResponseTimeout',\n      callbackID,\n      callback\n    );\n  },\n  onInvitationAccepted: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'invitationAccepted',\n      callbackID,\n      callback\n    );\n  },\n  onInvitationRefused: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'invitationRefused',\n      callbackID,\n      callback\n    );\n  },\n  onInvitationCanceled: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n      'invitationCanceled',\n      callbackID,\n      callback\n    );\n  },\n  // ------- live audio room - user------\n  joinRoom(roomID) {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitSignalingPlugin.getInstance()\n        .invoke('joinRoom', {\n          roomID,\n        })\n        .then(async () => {\n          try {\n            zloginfo('[Plugins][invitation]Join room successfully.', roomID);\n            // query the attributes of the users in room\n            // const fullAttributes = await _queryUsersInRoomAttributesFully();\n            // _usersInRoomAttributes.clear();\n            // fullAttributes.forEach((element) => {\n            //   _usersInRoomAttributes.set(element.userID, element.attributes);\n            // });\n            // zloginfo(\n            //   `[Plugins][invitation]Auto query the attributes of the users in room successfully.`,\n            //   _usersInRoomAttributes\n            // );\n            // query the room attributes\n            // await this.queryRoomProperties();\n            // zloginfo(\n            //   `[Plugins][invitation]Auto query the room attributes successfully.`,\n            //   _roomAttributes\n            // );\n            resolve(new ZegoInvitationImplResult('', ''));\n          } catch (error) {\n            zlogerror(\n              `[Plugins][invitation]Failed to auto query the attributes of the users in room of room attributes.`,\n              error\n            );\n          }\n        })\n        .catch((error) => {\n          zloginfo('[Plugins][invitation]Failed to join room.', roomID);\n          reject(error);\n        });\n    });\n  },\n  // getUsersInRoomAttributes: () => {\n  //   if (!ZegoUIKitSignalingPlugin) {\n  //     zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n  //     return;\n  //   }\n  //   return _usersInRoomAttributes;\n  // },\n  setUsersInRoomAttributes: (key, value, userIDs) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    // The call to the local end also triggers the corresponding callback on the local end\n    return new Promise((resolve, reject) => {\n      ZegoUIKitSignalingPlugin.getInstance()\n        .invoke('setUsersInRoomAttributes', {\n          key,\n          value,\n          userIDs,\n        })\n        .then(({ errorUserList, infos }) => {\n          // for the time being, consider setting only one property for one user at a time\n          if (errorUserList.length) {\n            zlogerror(\n              '[Plugins][invitation]Failed to set attributes of users in room.',\n              errorUserList\n            );\n            reject(new ZegoInvitationImplResult('1', ''));\n          } else {\n            const attributes = _usersInRoomAttributes.get(userIDs[0]);\n            if (attributes) {\n              if (!value) {\n                delete attributes[key];\n              } else {\n                attributes[key] = value;\n              }\n            } else if (value) {\n              _usersInRoomAttributes.set(userIDs[0], { [key]: value });\n            }\n            zloginfo(\n              '[Plugins][invitation]Set attributes of users in room successfully.'\n            );\n            resolve(new ZegoInvitationImplResult('', ''));\n          }\n        })\n        .catch((error) => {\n          zlogerror(\n            '[Plugins][invitation]Failed to set attributes of users in room.',\n            error\n          );\n          reject(error);\n        });\n    });\n  },\n  queryUsersInRoomAttributes: (nextFlag, count = _queryCount) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      _queryUsersInRoomAttributesFully(nextFlag, count)\n        .then((fullAttributes) => {\n          _usersInRoomAttributes.clear();\n          fullAttributes.forEach((element) => {\n            _usersInRoomAttributes.set(element.userID, element.attributes);\n          });\n          zloginfo(\n            '[Plugins][invitation]Query attributes of users in room successfully.',\n            _usersInRoomAttributes\n          );\n          resolve({\n            ...new ZegoInvitationImplResult('', ''),\n            usersInRoomAttributes: _usersInRoomAttributes,\n          });\n          // update the user information of the core layer\n          _updateCoreUserAndNofityChanges(fullAttributes);\n        })\n        .catch((error) => {\n          zlogerror(\n            '[Plugins][invitation]Failed to query attributes of users in room.',\n            error\n          );\n          reject(error);\n        });\n    });\n  },\n  onUsersInRoomAttributesUpdated: (callbackID, callback) => {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    if (typeof callback !== 'function') {\n      ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n        'usersInRoomAttributesUpdated',\n        callbackID,\n        callback\n      );\n    } else {\n      ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n        'usersInRoomAttributesUpdated',\n        callbackID,\n        ({ infos, editor }) => {\n          // incremental information\n          const oldAttributes = new Map();\n          Array.from(_usersInRoomAttributes.keys()).forEach((key) => {\n            oldAttributes.set(\n              key,\n              JSON.parse(JSON.stringify(_usersInRoomAttributes.get(key)))\n            );\n          });\n          const updateKeys = [];\n          infos.forEach((info) => {\n            Object.keys(info.attributes).forEach((key) => {\n              if (!updateKeys.includes(key)) {\n                updateKeys.push(key);\n              }\n            });\n            // merge\n            let temp = _usersInRoomAttributes.get(info.userID);\n            !temp && (temp = {});\n            _usersInRoomAttributes.set(info.userID, temp);\n            Object.assign(temp, info.attributes);\n          });\n          zloginfo(\n            '[Plugins][invitation]Notify updated attributes of users in room successfully.',\n            updateKeys,\n            oldAttributes,\n            _usersInRoomAttributes,\n            editor\n          );\n          callback(updateKeys, oldAttributes, _usersInRoomAttributes, editor);\n\n          // update the user information of the core layer\n          _updateCoreUserAndNofityChanges(infos, editor);\n        }\n      );\n    }\n  },\n  // ------- live audio room - room------\n  // getRoomProperties() {\n  //   if (!ZegoUIKitSignalingPlugin) {\n  //     zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n  //     return;\n  //   }\n  //   return _roomAttributes;\n  // },\n  updateRoomProperty(\n    key,\n    value,\n    isDeleteAfterOwnerLeft,\n    isForce,\n    isUpdateOwner\n  ) {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitSignalingPlugin.getInstance()\n        .invoke('updateRoomProperty', {\n          key,\n          value,\n          isDeleteAfterOwnerLeft,\n          isForce,\n          isUpdateOwner,\n        })\n        .then(({ errorKeys }) => {\n          if (!errorKeys.includes(key)) {\n            _roomAttributes[key] = value;\n          }\n          zloginfo(\n            '[Plugins][invitation]Update room attributes successfully.',\n            errorKeys\n          );\n          resolve({ ...new ZegoInvitationImplResult('', ''), errorKeys });\n        })\n        .catch((error) => {\n          zlogerror(\n            '[Plugins][invitation]Failed to update room attributes.',\n            error\n          );\n          reject(error);\n        });\n    });\n  },\n  deleteRoomProperties(keys, isForce) {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitSignalingPlugin.getInstance()\n        .invoke('deleteRoomProperties', {\n          keys,\n          isForce,\n        })\n        .then(({ errorKeys }) => {\n          keys.forEach((key) => {\n            if (!errorKeys.includes(key)) {\n              delete _roomAttributes[key];\n            }\n          });\n          zloginfo(\n            '[Plugins][invitation]Delete room attributes successfully.',\n            errorKeys\n          );\n          resolve({ ...new ZegoInvitationImplResult('', ''), errorKeys });\n        })\n        .catch((error) => {\n          zlogerror(\n            '[Plugins][invitation]Failed to delete room attributes.',\n            error\n          );\n          reject(error);\n        });\n    });\n  },\n  beginRoomPropertiesBatchOperation(\n    isDeleteAfterOwnerLeft,\n    isForce,\n    isUpdateOwner\n  ) {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    ZegoUIKitSignalingPlugin.getInstance().invoke(\n      'beginRoomPropertiesBatchOperation',\n      {\n        isDeleteAfterOwnerLeft,\n        isForce,\n        isUpdateOwner,\n      }\n    );\n    zloginfo(\n      '[Plugins][invitation]Begin room properties batch operation successfully.'\n    );\n  },\n  endRoomPropertiesBatchOperation() {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitSignalingPlugin.getInstance()\n        .invoke('endRoomPropertiesBatchOperation')\n        .then(async () => {\n          try {\n            zloginfo(\n              '[Plugins][invitation]End room properties batch operation successfully.'\n            );\n            // query the room attributes\n            // await this.queryRoomProperties();\n            // zloginfo(\n            //   `[Plugins][invitation]Auto query the room attributes successfully.`,\n            //   _roomAttributes\n            // );\n            resolve(new ZegoInvitationImplResult('', ''));\n          } catch (error) {\n            zlogerror(\n              `[Plugins][invitation]Failed to auto query room attributes.`,\n              error\n            );\n          }\n        })\n        .catch((error) => {\n          zlogerror(\n            '[Plugins][invitation]Failed to end room attributes batch operation.',\n            error\n          );\n          reject(error);\n        });\n    });\n  },\n  queryRoomProperties() {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitSignalingPlugin.getInstance()\n        .invoke('queryRoomProperties')\n        .then(({ roomID, roomAttributes }) => {\n          zloginfo(\n            '[Plugins][invitation]Query room attributes successfully.',\n            roomAttributes\n          );\n          _roomAttributes = roomAttributes;\n          resolve({ ...new ZegoInvitationImplResult('', ''), _roomAttributes });\n        })\n        .catch((error) => {\n          zlogerror(\n            '[Plugins][invitation]Failed to query room attributes.',\n            error\n          );\n          reject(error);\n        });\n    });\n  },\n  onRoomPropertyUpdated(callbackID, callback) {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    if (typeof callback !== 'function') {\n      ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n        'roomPropertyUpdated',\n        callbackID,\n        callback\n      );\n    } else {\n      ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n        'roomPropertyUpdated',\n        callbackID,\n        (info) => {\n          const oldRoomAttributes = JSON.parse(JSON.stringify(_roomAttributes));\n          const { action, roomAttributes } = info;\n          const updateKeys = Object.keys(roomAttributes);\n          Object.keys(roomAttributes).forEach((key) => {\n            const oldValue = _roomAttributes[key];\n            // action: Set = 0, Delete = 1\n            if (action === 0) {\n              const value = roomAttributes[key];\n              _roomAttributes[key] = value;\n              callback(key, oldValue, value);\n            } else {\n              delete _roomAttributes[key];\n              callback(key, oldValue, '');\n            }\n          });\n          _notifyRoomPropertiesFullUpdated([\n            updateKeys,\n            oldRoomAttributes,\n            _roomAttributes,\n          ]);\n        }\n      );\n    }\n  },\n  onRoomPropertiesFullUpdated(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onRoomPropertiesFullUpdatedCallbackMap) {\n        zloginfo(\n          '[Plugins][invitation][onRoomPropertiesFullUpdated] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onRoomPropertiesFullUpdatedCallbackMap[callbackID];\n      }\n    } else {\n      _onRoomPropertiesFullUpdatedCallbackMap[callbackID] = callback;\n    }\n  },\n  onInRoomTextMessageReceived(callbackID, callback) {\n    if (!ZegoUIKitSignalingPlugin) {\n      zlogerror(`[Plugins][invitation]Signaling plugin install error.`);\n      return;\n    }\n    if (typeof callback !== 'function') {\n      ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n        'inRoomTextMessageReceived',\n        callbackID,\n        callback\n      );\n    } else {\n      ZegoUIKitSignalingPlugin.getInstance().registerPluginEventHandler(\n        'inRoomTextMessageReceived',\n        callbackID,\n        ({ messageList, fromConversationID }) => {\n          callback(messageList.map((message) => {\n            return {\n              messageID: message.messageID,\n              timestamp: message.timestamp,\n              orderKey: message.orderKey,\n              senderUserID: message.senderUserID,\n              text: message.message,\n            }\n          }));\n        }\n      );\n    }\n  }\n};\n\nexport default ZegoUIKitSignalingPluginImpl;\n"],"mappings":"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"}