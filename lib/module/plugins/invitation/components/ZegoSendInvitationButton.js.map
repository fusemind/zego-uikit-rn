{"version":3,"names":["React","Fragment","Text","Image","TouchableOpacity","StyleSheet","ZegoUIKitInvitationService","ZegoInvitationType","zloginfo","zlogerror","ZegoSendInvitationButton","props","icon","text","invitees","type","videoCall","data","timeout","onPressed","onWillPressed","backgroundColor","fontSize","color","width","height","borderRadius","verticalLayout","resourceID","notificationTitle","notificationMessage","getImageSourceByPath","require","getRenderView","renderView","undefined","getCustomTextStyle","marginRight","create","getCustomContainerStyle","customContainer","flexDirection","onButtonPress","canSendInvitation","console","log","then","catch","error","temp","sendInvitation","title","message","code","callID","errorInvitees","length","inviteesBackup","JSON","parse","stringify","forEach","errorInviteeID","index","findIndex","inviteeID","splice","invitationID","errorCode","errorMessage","styles","container","alignItems","justifyContent"],"sources":["ZegoSendInvitationButton.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { Text, Image, TouchableOpacity, StyleSheet } from 'react-native';\nimport ZegoUIKitInvitationService from '../services';\nimport ZegoInvitationType from './ZegoInvitationType';\nimport { zloginfo, zlogerror } from '../../../utils/logger';\n\nexport default function ZegoSendInvitationButton(props) {\n  const {\n    icon,\n    text,\n    invitees = [],\n    type = ZegoInvitationType.videoCall,\n    data,\n    timeout = 60,\n    onPressed,\n    onWillPressed,\n    backgroundColor = '#F3F4F7',\n    fontSize = 16,\n    color = '#2A2A2A',\n    width = 42,\n    height = 42,\n    borderRadius = 1000,\n    verticalLayout, // Default row layout, no layout parameters default to precedence icon\n    resourceID,\n    notificationTitle,\n    notificationMessage\n  } = props;\n  const getImageSourceByPath = () => {\n    if (type === ZegoInvitationType.videoCall) {\n      return require('../resources/blue_button_video_call.png');\n    } else {\n      return require('../resources/blue_button_audio_call.png');\n    }\n  };\n  const getRenderView = () => {\n    let renderView;\n    if (verticalLayout === undefined) {\n      // Choose between icon and text\n      if (icon) {\n        renderView = <Image resizeMode=\"contain\" source={icon} />;\n      } else {\n        if (!text) {\n          renderView = (\n            <Image resizeMode=\"contain\" source={getImageSourceByPath()} />\n          );\n        } else {\n          renderView = <Text style={getCustomTextStyle(fontSize, color).text}>{text}</Text>;\n        }\n      }\n    } else {\n      // Both icon and text exist\n      renderView = <Fragment>\n        <Image resizeMode=\"contain\" source={icon || getImageSourceByPath()} style={{marginRight: 6}}/>\n        <Text style={getCustomTextStyle(fontSize, color).text}>{text}</Text>\n      </Fragment>\n    }\n    return renderView;\n  };\n  const getCustomTextStyle = (fontSize, color) => StyleSheet.create({\n    text: {\n      fontSize,\n      color,\n    },\n  });\n  const getCustomContainerStyle = (width, height, borderRadius, backgroundColor, verticalLayout) => StyleSheet.create({\n    customContainer: {\n      flexDirection: verticalLayout ? 'column' : 'row',\n      width,\n      height,\n      backgroundColor,\n      borderRadius,\n    },\n  });\n\n  const onButtonPress = async () => {\n    let canSendInvitation = true;\n    if (onWillPressed) {\n      console.log('#########onWillPressed judge', typeof onWillPressed === 'object', typeof (onWillPressed.then) === 'function', typeof (onWillPressed.catch) === 'function');\n      if (typeof onWillPressed === 'object' && typeof (onWillPressed.then) === 'function' && typeof (onWillPressed.catch) === 'function') {\n        // Promise\n        console.log('#########onWillPressed promise', onWillPressed);\n        try {\n          canSendInvitation = await onWillPressed;\n        } catch (error) {\n          canSendInvitation = false;\n        }\n      } else if (typeof onWillPressed === 'function') {\n        console.log('#########onWillPressed function', onWillPressed);\n        const temp = onWillPressed();\n        if (typeof temp === 'object' && typeof (temp.then) === 'function' && typeof (temp.catch) === 'function') {\n          console.log('#########onWillPressed promise', temp);\n          try {\n            canSendInvitation = await temp;\n          } catch (error) {\n            canSendInvitation = false;\n          }\n        } else {\n          canSendInvitation = temp;\n        }\n      }\n    }\n    if (!canSendInvitation) return;\n    zloginfo(\n      `[Components]Send invitation start, invitees: ${invitees}, timeout: ${timeout}, type: ${type}, data: ${data}`\n    );\n    ZegoUIKitInvitationService.sendInvitation(invitees, timeout, type, data, { resourceID, title: notificationTitle, message: notificationMessage })\n      .then(({ code, message, callID, errorInvitees }) => {\n        zloginfo(\n          `[Components]Send invitation success, code: ${code}, message: ${message}, errorInvitees: ${errorInvitees}`\n        );\n        if (invitees.length > errorInvitees.length) {\n          if (typeof onPressed === 'function') {\n            const inviteesBackup = JSON.parse(JSON.stringify(invitees));\n            errorInvitees.forEach((errorInviteeID) => {\n              const index = inviteesBackup.findIndex(\n                (inviteeID) => errorInviteeID === inviteeID\n              );\n              index !== -1 && inviteesBackup.splice(index, 1);\n            });\n            onPressed({\n              invitationID: callID,\n              errorCode: code,\n              errorMessage: message,\n              errorInvitees,\n              invitees: inviteesBackup,\n            });\n          }\n        }\n      })\n      .catch(({ code, message }) => {\n        zlogerror(\n          `[Components]Send invitation error, code: ${code}, message: ${message}`\n        );\n      });\n  };\n  return (\n    <TouchableOpacity\n      style={[\n        styles.container,\n        getCustomContainerStyle(width, height, borderRadius, backgroundColor, verticalLayout).customContainer\n      ]}\n      onPress={onButtonPress}\n    >\n      {getRenderView()}\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n"],"mappings":"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"}