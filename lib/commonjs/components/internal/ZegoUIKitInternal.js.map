{"version":3,"names":["_appInfo","appID","appSign","_isRoomConnected","_currentRoomState","_currentRoomID","_audioOutputType","_usingFrontFacingCamera","_onMicDeviceOnCallbackMap","_onCameraDeviceOnCallbackMap","_onRoomStateChangedCallbackMap","_onRequireNewTokenCallbackMap","_onUserJoinCallbackMap","_onUserLeaveCallbackMap","_onUserInfoUpdateCallbackMap","_onSoundLevelUpdateCallbackMap","_onSDKConnectedCallbackMap","_onAudioOutputDeviceTypeChangeCallbackMap","_onOnlySelfInRoomCallbackMap","_onUserCountOrPropertyChangedCallbackMap","_onAudioVideoAvailableCallbackMap","_onAudioVideoUnavailableCallbackMap","_onInRoomMessageReceivedCallbackMap","_onInRoomMessageSentCallbackMap","_onRoomPropertyUpdatedCallbackMap","_onRoomPropertiesFullUpdatedCallbackMap","_onInRoomCommandReceivedCallbackMap","_onMeRemovedFromRoomCallbackMap","_onTurnOnYourCameraRequestCallbackMap","_onTurnOnYourMicrophoneRequestCallbackMap","_onMemberListForceSortCallbackMap","_onAudioVideoListForceSortCallbackMap","_localCoreUser","_createCoreUser","_streamCoreUserMap","_coreUserMap","_qualityUpdateLogCounter","_inRoomMessageList","_audioVideoResourceMode","ZegoAudioVideoResourceMode","Default","_roomProperties","_isLargeRoom","_roomMemberCount","_markAsLargeRoom","_resetData","zloginfo","_resetDataForLeavingRoom","userID","userName","profileUrl","extendInfo","_createPublicUser","coreUser","isMicrophoneOn","isMicDeviceOn","isCameraOn","isCameraDeviceOn","soundLevel","inRoomAttributes","viewID","viewFillMode","streamID","publisherQuality","joinTime","_isLocalUser","undefined","_setLocalUserInfo","userInfo","_onRoomUserUpdate","roomID","updateType","userList","userInfoList","length","forEach","user","_getStreamIDByUserID","Date","now","_notifyUserInfoUpdate","push","_tryStartPlayStream","_notifyUserCountOrPropertyChanged","ZegoChangedCountOrProperty","userAdd","Object","keys","callbackID","_tryStopPlayStream","userDelete","_onRoomStreamUpdate","streamList","users","stream","cameraStateUpdate","_onRemoteCameraStateUpdate","isOn","console","warn","_onAudioRouteChange","type","_onRemoteMicStateUpdate","microphoneStateUpdate","_onRoomStateChanged","reason","errorCode","extendedData","_tryStartPublishStream","_notifyMeRemovedFromRoom","_onInRoomMessageReceived","messageList","messages","msg","message","messageID","sendTime","sender","fromUser","_onRequireNewToken","token","ZegoExpressEngine","instance","renewToken","then","catch","error","zlogerror","_onRoomExtraInfoUpdate","roomExtraInfoList","updateKeys","oldRoomProperties","JSON","parse","stringify","key","updateTime","updateUser","value","roomProperties","propertyKey","_notifyRoomPropertyUpdate","ZegoRoomPropertyUpdateType","remote","_notifyRoomPropertiesFullUpdate","_onIMCustomCommandReceived","command","commandObj","removeUserIDList","zego_remove_user","turnCameraOnUserID","zego_turn_camera_on","turnCameraOffUserID","zego_turn_camera_off","turnMicrophoneOnUserID","zego_turn_microphone_on","turnMicrophoneOffUserID","zego_turn_microphone_off","find","removeUserID","_leaveRoom","_turnCameraDeviceOn","_turnMicDeviceOn","_sendInRoomCommand","toUserList","Promise","reject","resolve","sendCustomCommand","zlogwarning","logoutRoom","stopSoundLevelMonitor","on","muteMicrophone","extraInfo","setStreamExtraInfo","_tryStopPublishStream","isLargeRoom","enableCamera","_registerEngineCallback","quality","split","state","_getUserIDByStreamID","soundLevels","_notifySoundLevelUpdate","audioRoute","remainTimeInSecond","_unregisterEngineCallback","off","values","sort","user1","user2","map","_getPublishStreamID","startPublishingStream","startPreview","reactTag","viewMode","fillMode","backgroundColor","force","stopPublishingStream","stopPreview","startPlayingStream","resourceMode","stopPlayingStream","oldValue","_isEngineCreated","isRoomConnected","setAudioVideoResourceMode","audioVideoResourceMode","updateRenderingProperty","onUserInfoUpdate","callback","onSoundLevelUpdate","onSDKConnected","connectSDK","setEngineConfig","advancedConfig","notify_remote_device_unknown_status","notify_remote_device_init_status","engineProfile","scenario","createEngineWithProfile","engine","disconnectSDK","destroyEngine","finally","useFrontFacingCamera","isFrontFacing","useFrontCamera","isUsingFrontFacingCamera","enableSpeaker","enable","muteSpeaker","audioOutputDeviceType","turnMicDeviceOn","turnCameraDeviceOn","onMicDeviceOn","onCameraDeviceOn","setAudioOutputToSpeaker","isSpeaker","setAudioRouteToSpeaker","onAudioOutputDeviceTypeChange","setAudioConfig","config","setVideoConfig","onAudioVideoAvailable","onAudioVideoUnavailable","startPlayingAllAudioVideo","muteAllPlayStreamAudio","muteAllPlayStreamVideo","stopPlayingAllAudioVideo","onTurnOnYourCameraRequest","onTurnOnYourMicrophoneRequest","joinRoom","markAsLargeRoom","isUserStatusNotify","loginRoom","startSoundLevelMonitor","leaveRoom","onRoomStateChanged","onRequireNewToken","setRoomProperty","setRoomExtraInfo","set","code","updateRoomProperties","newRoomProperties","updateKey","update","getRoomProperties","onRoomPropertyUpdated","onRoomPropertiesFullUpdated","sendInRoomCommand","toUserIDs","onInRoomCommandReceived","onMeRemovedFromRoom","connectUser","disconnectUser","getLocalUserInfo","getUser","getAllUsers","a","b","publicUsers","onUserJoin","onUserLeave","onOnlySelfInRoom","onUserCountOrPropertyChanged","removeUserFromRoom","userIDs","getInRoomMessages","sendInRoomMessage","sendBroadcastMessage","result","inRoomMessage","onInRoomMessageReceived","onInRoomMessageSent","notifyUserCountOrPropertyChanged","notifyUserInfoUpdate","forceSortMemberList","onMemberListForceSort","forceSortAudioVideoList","onAudioVideoListForceSort"],"sources":["ZegoUIKitInternal.js"],"sourcesContent":["import ZegoExpressEngine from 'zego-express-engine-reactnative';\nimport { zlogerror, zloginfo, zlogwarning } from '../../utils/logger';\nimport { ZegoAudioVideoResourceMode, ZegoChangedCountOrProperty, ZegoRoomPropertyUpdateType } from './defines'\n\nvar _appInfo = {\n  appID: 0,\n  appSign: '',\n};\nvar _isRoomConnected = false;\nvar _currentRoomState = 7; // Logout\nvar _currentRoomID = '';\nvar _audioOutputType = 0;\nvar _usingFrontFacingCamera = true;\n\nvar _onMicDeviceOnCallbackMap = {};\nvar _onCameraDeviceOnCallbackMap = {};\nvar _onRoomStateChangedCallbackMap = {};\nvar _onRequireNewTokenCallbackMap = {};\nvar _onUserJoinCallbackMap = {};\nvar _onUserLeaveCallbackMap = {};\nvar _onUserInfoUpdateCallbackMap = {};\nvar _onSoundLevelUpdateCallbackMap = {};\nvar _onSDKConnectedCallbackMap = {};\nvar _onAudioOutputDeviceTypeChangeCallbackMap = {};\nvar _onOnlySelfInRoomCallbackMap = {};\nvar _onUserCountOrPropertyChangedCallbackMap = {};\nvar _onAudioVideoAvailableCallbackMap = {};\nvar _onAudioVideoUnavailableCallbackMap = {};\nvar _onInRoomMessageReceivedCallbackMap = {};\nvar _onInRoomMessageSentCallbackMap = {};\nvar _onRoomPropertyUpdatedCallbackMap = {};\nvar _onRoomPropertiesFullUpdatedCallbackMap = {};\nvar _onInRoomCommandReceivedCallbackMap = {};\nvar _onMeRemovedFromRoomCallbackMap = {};\nvar _onTurnOnYourCameraRequestCallbackMap = {};\nvar _onTurnOnYourMicrophoneRequestCallbackMap = {};\n\n// Force update component callback\nvar _onMemberListForceSortCallbackMap = {};\nvar _onAudioVideoListForceSortCallbackMap = {};\n\nvar _localCoreUser = _createCoreUser('', '', '', {});\nvar _streamCoreUserMap = {}; // <streamID, CoreUser>\nvar _coreUserMap = {}; // <userID, CoreUser>\nvar _qualityUpdateLogCounter = 0;\n\nvar _inRoomMessageList = [];\nvar _audioVideoResourceMode = ZegoAudioVideoResourceMode.Default;\nvar _roomProperties = {};\nvar _isLargeRoom = false;\nvar _roomMemberCount = 0;\nvar _markAsLargeRoom = false;\n\nfunction _resetData() {\n  zloginfo('Reset all data.');\n  _appInfo = { appID: 0, appSign: '' };\n  _localCoreUser = _createCoreUser('', '', '', {});\n  _streamCoreUserMap = {};\n  _coreUserMap = {};\n  _currentRoomID = '';\n  _currentRoomState = 7;\n  _isRoomConnected = false;\n  _audioOutputType = 0;\n  _inRoomMessageList = [];\n  _audioVideoResourceMode = ZegoAudioVideoResourceMode.Default;\n  _isLargeRoom = false;\n  _roomMemberCount = 0;\n  _markAsLargeRoom = false;\n}\n\nfunction _resetDataForLeavingRoom() {\n  zloginfo('Reset data for leaving room.');\n  _streamCoreUserMap = {};\n  _coreUserMap = {};\n  _currentRoomID = '';\n  _currentRoomState = 7;\n  _isRoomConnected = false;\n  const { userID, userName, profileUrl, extendInfo } = _localCoreUser;\n  _localCoreUser = _createCoreUser(userID, userName, profileUrl, extendInfo);\n  _coreUserMap[_localCoreUser.userID] = _localCoreUser;\n  _inRoomMessageList = [];\n  _roomProperties = {};\n  _isLargeRoom = false;\n  _roomMemberCount = 0;\n  _markAsLargeRoom = false;\n}\n\nfunction _createPublicUser(coreUser) {\n  return {\n    userID: coreUser.userID,\n    userName: coreUser.userName,\n    extendInfo: coreUser.extendInfo,\n    isMicrophoneOn: coreUser.isMicDeviceOn,\n    isCameraOn: coreUser.isCameraDeviceOn,\n    soundLevel: coreUser.soundLevel,\n    inRoomAttributes: coreUser.inRoomAttributes,\n  };\n}\nfunction _createCoreUser(userID, userName, profileUrl, extendInfo) {\n  return {\n    userID: userID,\n    userName: userName,\n    profileUrl: profileUrl,\n    extendInfo: extendInfo,\n    viewID: -1,\n    viewFillMode: 1,\n    streamID: '',\n    isMicDeviceOn: false,\n    isCameraDeviceOn: false,\n    publisherQuality: 0,\n    soundLevel: 0,\n    joinTime: 0,\n    inRoomAttributes: {},\n  };\n}\nfunction _isLocalUser(userID) {\n  return (\n    userID === undefined || userID === '' || _localCoreUser.userID === userID\n  );\n}\nfunction _setLocalUserInfo(userInfo) {\n  _localCoreUser = _createCoreUser(\n    userInfo.userID,\n    userInfo.userName,\n    userInfo.profileUrl,\n    userInfo.extendInfo\n  );\n  _coreUserMap[userInfo.userID] = _localCoreUser;\n}\n\nfunction _onRoomUserUpdate(roomID, updateType, userList) {\n  // No need for roomID, does not support multi-room right now.\n  const userInfoList = [];\n  if (updateType == 0) {\n    _roomMemberCount += userList.length;\n    if (_roomMemberCount >= 500) {\n      _isLargeRoom = true;\n    }\n    userList.forEach((user) => {\n      if (!(user.userID in _coreUserMap)) {\n        const coreUser = _createCoreUser(user.userID, user.userName);\n        _coreUserMap[user.userID] = coreUser;\n      }\n      const streamID = _getStreamIDByUserID(user.userID);\n      if (streamID in _streamCoreUserMap) {\n        _coreUserMap[user.userID].streamID = streamID;\n      }\n      _coreUserMap[user.userID].joinTime = Date.now();\n      _notifyUserInfoUpdate(_coreUserMap[user.userID]);\n\n      userInfoList.push(_createPublicUser(_coreUserMap[user.userID]));\n\n      // Start after user insert into list\n      _tryStartPlayStream(user.userID);\n    });\n    _notifyUserCountOrPropertyChanged(ZegoChangedCountOrProperty.userAdd);\n\n    zloginfo('User Join: ', userInfoList);\n    Object.keys(_onUserJoinCallbackMap).forEach((callbackID) => {\n      if (_onUserJoinCallbackMap[callbackID]) {\n        _onUserJoinCallbackMap[callbackID](userInfoList);\n      }\n    });\n  } else {\n    _roomMemberCount -= userList.length;\n    userList.forEach((user) => {\n      if (user.userID in _coreUserMap) {\n        const coreUser = _coreUserMap[user.userID];\n        const userInfo = {\n          userID: coreUser.userID,\n          userName: coreUser.userName,\n          profileUrl: coreUser.profileUrl,\n          extendInfo: coreUser.extendInfo,\n        };\n        userInfoList.push(userInfo);\n\n        // Stop play stream before remove user list\n        _tryStopPlayStream(coreUser.userID, true);\n        delete _coreUserMap[user.userID];\n      }\n    });\n    _notifyUserCountOrPropertyChanged(ZegoChangedCountOrProperty.userDelete);\n    zloginfo('User Leave: ', userInfoList);\n    Object.keys(_onUserLeaveCallbackMap).forEach((callbackID) => {\n      if (_onUserLeaveCallbackMap[callbackID]) {\n        _onUserLeaveCallbackMap[callbackID](userInfoList);\n      }\n    });\n    if (Object.keys(_coreUserMap).length <= 1) {\n      Object.keys(_onOnlySelfInRoomCallbackMap).forEach((callbackID) => {\n        if (_onOnlySelfInRoomCallbackMap[callbackID]) {\n          _onOnlySelfInRoomCallbackMap[callbackID]();\n        }\n      });\n    }\n  }\n}\nfunction _onRoomStreamUpdate(roomID, updateType, streamList) {\n  zloginfo('_onRoomStreamUpdate: ', roomID, updateType, streamList);\n  var users = [];\n  if (updateType == 0) {\n    // Add\n    streamList.forEach((stream) => {\n      const userID = stream.user.userID;\n      const userName = stream.user.userName;\n      const streamID = stream.streamID;\n      if (userID in _coreUserMap) {\n        _coreUserMap[userID].streamID = streamID;\n        _streamCoreUserMap[streamID] = _coreUserMap[userID];\n        _notifyUserInfoUpdate(_coreUserMap[userID]);\n        _tryStartPlayStream(userID);\n\n        users.push(_coreUserMap[userID]);\n      } else {\n        _streamCoreUserMap[streamID] = _createCoreUser(\n          userID,\n          userName,\n          '',\n          {}\n        );\n        _streamCoreUserMap[streamID].streamID = streamID;\n\n        _coreUserMap[userID] = _streamCoreUserMap[streamID];\n\n        users.push(_streamCoreUserMap[streamID]);\n      }\n    });\n\n    Object.keys(_onAudioVideoAvailableCallbackMap).forEach((callbackID) => {\n      if (_onAudioVideoAvailableCallbackMap[callbackID]) {\n        _onAudioVideoAvailableCallbackMap[callbackID](users);\n      }\n    });\n  } else {\n    streamList.forEach((stream) => {\n      const userID = stream.user.userID;\n      const streamID = stream.streamID;\n      if (userID in _coreUserMap) {\n        _tryStopPlayStream(userID, true);\n        _coreUserMap[userID].isCameraDeviceOn = false;\n        _coreUserMap[userID].isMicDeviceOn = false;\n        _coreUserMap[userID].streamID = '';\n        _notifyUserInfoUpdate(_coreUserMap[userID]);\n\n        users.push(_coreUserMap[userID]);\n\n        delete _streamCoreUserMap[streamID];\n      }\n    });\n    _notifyUserCountOrPropertyChanged(\n      ZegoChangedCountOrProperty.cameraStateUpdate\n    );\n\n    Object.keys(_onAudioVideoUnavailableCallbackMap).forEach((callbackID) => {\n      if (_onAudioVideoUnavailableCallbackMap[callbackID]) {\n        _onAudioVideoUnavailableCallbackMap[callbackID](users);\n      }\n    });\n  }\n}\nfunction _onRemoteCameraStateUpdate(userID, isOn) {\n  console.warn('>>>>>>>>>>>>> _onRemoteCameraStateUpdate', userID, isOn);\n  if (userID in _coreUserMap) {\n    _coreUserMap[userID].isCameraDeviceOn = isOn;\n    _notifyUserInfoUpdate(_coreUserMap[userID]);\n    _notifyUserCountOrPropertyChanged(\n      ZegoChangedCountOrProperty.cameraStateUpdate\n    );\n\n    Object.keys(_onCameraDeviceOnCallbackMap).forEach((callbackID) => {\n      if (_onCameraDeviceOnCallbackMap[callbackID]) {\n        _onCameraDeviceOnCallbackMap[callbackID](userID, isOn);\n      }\n    });\n\n    if (userID != _localCoreUser.userID) {\n      if (isOn) {\n        _tryStartPlayStream(userID);\n      }\n    }\n  }\n}\nfunction _onAudioRouteChange(type) {\n  Object.keys(_onAudioOutputDeviceTypeChangeCallbackMap).forEach(\n    (callbackID) => {\n      if (_onAudioOutputDeviceTypeChangeCallbackMap[callbackID]) {\n        _onAudioOutputDeviceTypeChangeCallbackMap[callbackID](type);\n      }\n    }\n  );\n  _audioOutputType = type;\n}\nfunction _onRemoteMicStateUpdate(userID, isOn) {\n  console.warn('>>>>>>>>>>>>> _onRemoteMicStateUpdate', userID, isOn);\n  if (userID in _coreUserMap) {\n    _coreUserMap[userID].isMicDeviceOn = isOn;\n    _notifyUserInfoUpdate(_coreUserMap[userID]);\n    _notifyUserCountOrPropertyChanged(\n      ZegoChangedCountOrProperty.microphoneStateUpdate\n    );\n\n    Object.keys(_onMicDeviceOnCallbackMap).forEach((callbackID) => {\n      if (_onMicDeviceOnCallbackMap[callbackID]) {\n        _onMicDeviceOnCallbackMap[callbackID](userID, isOn);\n      }\n    });\n\n    if (userID != _localCoreUser.userID) {\n      if (isOn) {\n        _tryStartPlayStream(userID);\n      }\n    }\n  }\n}\nfunction _onRoomStateChanged(roomID, reason, errorCode, extendedData) {\n  zloginfo('Room state chaged: ', roomID, reason, errorCode, extendedData);\n  // Not support multi-room right now\n  if (reason == 1 || reason == 4) {\n    // Logined || Reconnected\n    _isRoomConnected = true;\n    _tryStartPublishStream();\n  } else {\n    _isRoomConnected = false;\n    if (reason == 6) {\n      // KickOut\n      _notifyMeRemovedFromRoom();\n    }\n  }\n  _currentRoomState = reason;\n\n  Object.keys(_onRoomStateChangedCallbackMap).forEach((callbackID) => {\n    // callback may remove from map during room state chaging\n    if (callbackID in _onRoomStateChangedCallbackMap) {\n      if (_onRoomStateChangedCallbackMap[callbackID]) {\n        _onRoomStateChangedCallbackMap[callbackID](\n          reason,\n          errorCode,\n          extendedData\n        );\n      }\n    }\n  });\n}\nfunction _onInRoomMessageReceived(roomID, messageList) {\n  zloginfo('Received in room message: ', roomID, messageList.length);\n  var messages = [];\n  messageList.forEach((msg) => {\n    const message = {\n      message: msg.message,\n      messageID: msg.messageID,\n      sendTime: msg.sendTime,\n      sender: _createPublicUser(_coreUserMap[msg.fromUser.userID]),\n    };\n    messages.push(message);\n    _inRoomMessageList.push(message);\n  });\n\n  Object.keys(_onInRoomMessageReceivedCallbackMap).forEach((callbackID) => {\n    // callback may remove from map during room state chaging\n    if (callbackID in _onInRoomMessageReceivedCallbackMap) {\n      if (_onInRoomMessageReceivedCallbackMap[callbackID]) {\n        _onInRoomMessageReceivedCallbackMap[callbackID](messages);\n      }\n    }\n  });\n}\nfunction _onRequireNewToken() {\n  Object.keys(_onRequireNewTokenCallbackMap).forEach((callbackID) => {\n    if (callbackID in _onRequireNewTokenCallbackMap) {\n      if (_onRequireNewTokenCallbackMap[callbackID]) {\n        const token = _onRequireNewTokenCallbackMap[callbackID]();\n        if (token) {\n          ZegoExpressEngine.instance()\n            .renewToken(_currentRoomID, token)\n            .then(() => {\n              zloginfo('Renew token success');\n            })\n            .catch((error) => {\n              zlogerror('Renew token failed: ', error);\n            });\n        } else {\n          zlogerror('Renew token failed: the returned token is abnormal');\n        }\n      }\n    }\n  });\n}\nfunction _onRoomExtraInfoUpdate(roomID, roomExtraInfoList) {\n  zloginfo('$$$$$$$$Room extra info update: ', roomID, roomExtraInfoList);\n  const updateKeys = [];\n  const oldRoomProperties = JSON.parse(JSON.stringify(_roomProperties));\n  roomExtraInfoList.forEach(({ key, updateTime, updateUser, value }) => {\n    if (key === 'extra_info') {\n      const roomProperties = JSON.parse(value);\n      Object.keys(roomProperties).forEach((propertyKey) => {\n        if (oldRoomProperties[propertyKey] !== roomProperties[propertyKey]) {\n          updateKeys.push(propertyKey);\n          _roomProperties[propertyKey] = roomProperties[propertyKey];\n          _notifyRoomPropertyUpdate(propertyKey, oldRoomProperties[propertyKey], roomProperties[propertyKey], ZegoRoomPropertyUpdateType.remote);\n        }\n      })\n    }\n  });\n  if (updateKeys.length > 0) {\n    _notifyRoomPropertiesFullUpdate(updateKeys, oldRoomProperties, JSON.parse(JSON.stringify(_roomProperties)), ZegoRoomPropertyUpdateType.remote);\n  }\n}\nfunction _onIMCustomCommandReceived(roomID, fromUser, command) {\n  try {\n    const commandObj = JSON.parse(command);\n    if (commandObj && typeof commandObj === 'object') {\n      fromUser = _createPublicUser(_coreUserMap[fromUser.userID] || fromUser);\n      const removeUserIDList = commandObj.zego_remove_user;\n      const turnCameraOnUserID = commandObj.zego_turn_camera_on;\n      const turnCameraOffUserID = commandObj.zego_turn_camera_off;\n      const turnMicrophoneOnUserID = commandObj.zego_turn_microphone_on;\n      const turnMicrophoneOffUserID = commandObj.zego_turn_microphone_off;\n      if (removeUserIDList && removeUserIDList.find((removeUserID) => removeUserID === _localCoreUser.userID)) {\n        _notifyMeRemovedFromRoom();\n        // Leave the room automatically\n        _leaveRoom();\n      } else if (turnCameraOnUserID === _localCoreUser.userID) {\n        Object.keys(_onTurnOnYourCameraRequestCallbackMap).forEach((callbackID) => {\n          if (_onTurnOnYourCameraRequestCallbackMap[callbackID]) {\n            _onTurnOnYourCameraRequestCallbackMap[callbackID](fromUser);\n          }\n        });\n      } else if (turnMicrophoneOnUserID === _localCoreUser.userID) {\n        Object.keys(_onTurnOnYourMicrophoneRequestCallbackMap).forEach((callbackID) => {\n          if (_onTurnOnYourMicrophoneRequestCallbackMap[callbackID]) {\n            _onTurnOnYourMicrophoneRequestCallbackMap[callbackID](fromUser);\n          }\n        });\n      } else if (turnCameraOffUserID === _localCoreUser.userID) {\n        _turnCameraDeviceOn(_localCoreUser.userID, false);\n        // Automatic shutdown\n      } else if (turnMicrophoneOffUserID === _localCoreUser.userID) {\n        // Automatic shutdown\n        _turnMicDeviceOn(_localCoreUser.userID, false);\n      }\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  zloginfo('_onIMCustomCommandReceived: ', roomID, fromUser, command);\n  Object.keys(_onInRoomCommandReceivedCallbackMap).forEach((callbackID) => {\n    if (callbackID in _onInRoomCommandReceivedCallbackMap) {\n      if (_onInRoomCommandReceivedCallbackMap[callbackID]) {\n        _onInRoomCommandReceivedCallbackMap[callbackID](fromUser, command);\n      }\n    }\n  });\n}\nfunction _sendInRoomCommand(command, toUserList) {\n  if (!_isRoomConnected) {\n    zlogerror('You need to join the room before using this interface!');\n    return Promise.reject();\n  }\n  return new Promise((resolve, reject) => {\n    ZegoExpressEngine.instance().sendCustomCommand(_currentRoomID, command, toUserList).then(({ errorCode }) => {\n      if (errorCode === 0) {\n        zloginfo('[sendInRoomCommand]Send successfully', toUserList);\n        resolve();\n      } else {\n        zloginfo('[sendInRoomCommand]Send failure', toUserList);\n        reject();\n      }\n    }).catch((error) => {\n      zloginfo('[sendInRoomCommand]Send error', error);\n      reject();\n    })\n  });\n}\nfunction _leaveRoom() {\n  return new Promise((resolve, reject) => {\n    if (_currentRoomID == '') {\n      zlogwarning('You are not join in any room, no need to leave room.');\n      resolve();\n    } else {\n      zloginfo('leaveRoom: ', _currentRoomID);\n      ZegoExpressEngine.instance()\n        .logoutRoom(_currentRoomID)\n        .then(() => {\n          zloginfo('Leave room succeed.');\n          ZegoExpressEngine.instance().stopSoundLevelMonitor();\n          _notifyUserCountOrPropertyChanged(\n            ZegoChangedCountOrProperty.userDelete\n          );\n          _resetDataForLeavingRoom();\n          resolve();\n        })\n        .catch((error) => {\n          zlogerror('Leave room failed: ', error);\n          reject(error);\n        });\n    }\n  });\n}\nfunction _turnMicDeviceOn(userID, on) {\n  return new Promise((resolve, reject) => {\n    if (_isLocalUser(userID)) {\n      zloginfo('turnMicDeviceOn: ', _localCoreUser.userID, on);\n      ZegoExpressEngine.instance().muteMicrophone(!on);\n\n      _onRemoteMicStateUpdate(_localCoreUser.userID, on);\n\n      _localCoreUser.isMicDeviceOn = on;\n      _coreUserMap[_localCoreUser.userID].isMicDeviceOn = on;\n      _notifyUserInfoUpdate(_localCoreUser);\n      _notifyUserCountOrPropertyChanged(\n        ZegoChangedCountOrProperty.microphoneStateUpdate\n      );\n\n      // sync device status via stream extra info\n      var extraInfo = {\n          isCameraOn : _localCoreUser.isCameraDeviceOn,\n          isMicrophoneOn : on\n      }\n      ZegoExpressEngine.instance().setStreamExtraInfo(JSON.stringify(extraInfo))\n\n      if (on) {\n        _tryStartPublishStream();\n      } else {\n        _tryStopPublishStream();\n      }\n      resolve();\n    } else {\n      const isLargeRoom = _isLargeRoom || _markAsLargeRoom;\n      const command = on ? JSON.stringify({ zego_turn_microphone_on: userID }) : JSON.stringify({ zego_turn_microphone_off: userID });\n      const userInfo = _coreUserMap[userID];\n      const userName = userInfo ? (userInfo.userName || '') : '';\n      const toUserList = isLargeRoom ? [] : [{ userID, userName }];\n      _sendInRoomCommand(command, toUserList).then(() => {\n        zloginfo('turnMicDeviceOn others: ', userID, on);\n        resolve();\n      }).catch(() => {\n        zlogerror('turnMicDeviceOn others error: ', userID, on);\n        reject();\n      });\n    }\n  });\n}\nfunction _turnCameraDeviceOn(userID, on) {\n  return new Promise((resolve, reject) => {\n    if (_isLocalUser(userID)) {\n      // Default to Main Channel\n      zloginfo('turnCameraDeviceOn: ', _localCoreUser.userID, on);\n      ZegoExpressEngine.instance().enableCamera(on, 0);\n\n      _onRemoteCameraStateUpdate(_localCoreUser.userID, on);\n\n      _localCoreUser.isCameraDeviceOn = on;\n      // if (!on) {\n      //     _localCoreUser.viewID = -1;\n      // }\n      _coreUserMap[_localCoreUser.userID] = _localCoreUser;\n      _notifyUserInfoUpdate(_localCoreUser);\n      _notifyUserCountOrPropertyChanged(\n        ZegoChangedCountOrProperty.cameraStateUpdate\n      );\n\n      // sync device status via stream extra info\n      var extraInfo = {\n          isCameraOn : on,\n          isMicrophoneOn : _localCoreUser.isMicDeviceOn\n      }\n      ZegoExpressEngine.instance().setStreamExtraInfo(JSON.stringify(extraInfo))\n\n      if (on) {\n        _tryStartPublishStream();\n      } else {\n        _tryStopPublishStream();\n      }\n      resolve();\n    } else {\n      const isLargeRoom = _isLargeRoom || _markAsLargeRoom;\n      const command = on ? JSON.stringify({ zego_turn_camera_on: userID }) : JSON.stringify({ zego_turn_camera_off: userID });\n      const userInfo = _coreUserMap[userID];\n      const userName = userInfo ? (userInfo.userName || '') : '';\n      const toUserList = isLargeRoom ? [] : [{ userID, userName }];\n      _sendInRoomCommand(command, toUserList).then(() => {\n        zloginfo('turnCameraDeviceOn others: ', userID, on);\n        resolve();\n      }).catch(() => {\n        zlogerror('turnCameraDeviceOn others error: ', userID, on);\n        reject();\n      });\n    }\n  });\n}\nfunction _registerEngineCallback() {\n  zloginfo('Register callback for ZegoExpressEngine...');\n  ZegoExpressEngine.instance().on(\n    'roomUserUpdate',\n    (roomID, updateType, userList) => {\n      zloginfo('[roomUserUpdate callback]', roomID, updateType, userList);\n      _onRoomUserUpdate(roomID, updateType, userList);\n    }\n  );\n  ZegoExpressEngine.instance().on(\n    'roomStreamUpdate',\n    (roomID, updateType, streamList) => {\n      zloginfo('[roomStreamUpdate callback]', roomID, updateType, streamList);\n      _onRoomStreamUpdate(roomID, updateType, streamList);\n    }\n  );\n  ZegoExpressEngine.instance().on(\n    'publisherQualityUpdate',\n    (streamID, quality) => {\n      if (_qualityUpdateLogCounter % 10 == 0) {\n        _qualityUpdateLogCounter = 0;\n        zloginfo('[publisherQualityUpdate callback]', streamID, quality);\n      }\n      _qualityUpdateLogCounter++;\n      if (streamID.split('_')[2] === 'main') {\n        _localCoreUser.publisherQuality = quality;\n        _coreUserMap[_localCoreUser.userID].publisherQuality = quality;\n        _notifyUserInfoUpdate(_coreUserMap[_localCoreUser.userID]);\n      }\n    }\n  );\n  // ZegoExpressEngine.instance().on(\n  //     'publisherStateUpdate',\n  //     (streamID, state, errorCode, extendedData) => {\n  //         zloginfo('publisherStateUpdate#################', streamID, state, errorCode)\n  //     },\n  // );\n  ZegoExpressEngine.instance().on(\n    'playerQualityUpdate',\n    (streamID, quality) => {\n      if (_qualityUpdateLogCounter % 10 == 0) {\n        // zloginfo('[playerQualityUpdate callback]', streamID, quality);\n      }\n      // TODO\n    }\n  );\n  ZegoExpressEngine.instance().on(\n    'remoteCameraStateUpdate',\n    (streamID, state) => {\n      zloginfo('[remoteCameraStateUpdate callback]', streamID, state);\n      // 0 for device is on\n      _onRemoteCameraStateUpdate(_getUserIDByStreamID(streamID), state == 0);\n    }\n  );\n  ZegoExpressEngine.instance().on('remoteMicStateUpdate', (streamID, state) => {\n    zloginfo('[remoteMicStateUpdate callback]', streamID, state);\n    // 0 for device is on\n    _onRemoteMicStateUpdate(_getUserIDByStreamID(streamID), state == 0);\n  });\n  ZegoExpressEngine.instance().on(\n    'playerStateUpdate',\n    (streamID, state, errorCode, extendedData) => {\n      zloginfo(\n        '[playerStateUpdate callback]',\n        streamID,\n        state,\n        errorCode,\n        extendedData\n      );\n    }\n  );\n  ZegoExpressEngine.instance().on('remoteSoundLevelUpdate', (soundLevels) => {\n    // {streamID, soundLavel} value from 0.0 to 100.0\n    // zloginfo('[remoteSoundLevelUpdate callback]', soundLevels);\n    Object.keys(soundLevels).forEach((streamID) => {\n      const userID = _getUserIDByStreamID(streamID);\n      if (userID in _coreUserMap) {\n        _coreUserMap[userID].soundLevel = soundLevels[streamID];\n        _notifySoundLevelUpdate(userID, soundLevels[streamID]);\n      }\n    });\n  });\n  ZegoExpressEngine.instance().on('capturedSoundLevelUpdate', (soundLevel) => {\n    if (\n      _localCoreUser.userID === '' ||\n      !(_localCoreUser.userID in _coreUserMap)\n    ) {\n      return;\n    }\n    _localCoreUser.soundLevel = soundLevel;\n    _coreUserMap[_localCoreUser.userID].soundLevel = soundLevel;\n    _notifySoundLevelUpdate(_localCoreUser.userID, soundLevel);\n    // zloginfo('capturedSoundLevelUpdate', soundLevel)\n  });\n  // https://doc-en-api.zego.im/ReactNative/enums/_zegoexpressdefines_.zegoroomstatechangedreason.html\n  ZegoExpressEngine.instance().on(\n    'roomStateChanged',\n    (roomID, reason, errorCode, extendedData) => {\n      zloginfo(\n        '[roomStateChanged callback]',\n        roomID,\n        reason,\n        errorCode,\n        extendedData\n      );\n      _onRoomStateChanged(roomID, reason, errorCode, extendedData);\n    }\n  );\n  ZegoExpressEngine.instance().on('audioRouteChange', (audioRoute) => {\n    zloginfo('[audioRouteChange callback]', audioRoute);\n    _onAudioRouteChange(audioRoute);\n  });\n  ZegoExpressEngine.instance().on(\n    'IMRecvBroadcastMessage',\n    (roomID, messageList) => {\n      _onInRoomMessageReceived(roomID, messageList);\n    }\n  );\n  ZegoExpressEngine.instance().on(\n    'roomTokenWillExpire',\n    (roomID, remainTimeInSecond) => {\n      _onRequireNewToken();\n    }\n  );\n  ZegoExpressEngine.instance().on('roomExtraInfoUpdate', (roomID, roomExtraInfoList) => {\n    _onRoomExtraInfoUpdate(roomID, roomExtraInfoList);\n  });\n  ZegoExpressEngine.instance().on('roomStreamExtraInfoUpdate', (roomID, streamList) => {\n    zloginfo('roomStreamExtraInfoUpdate', streamList)\n    streamList.forEach((stream) => {\n        try {\n            var extraInfo = JSON.parse(stream.extraInfo)\n            if ('isCameraOn' in extraInfo) {\n                _onRemoteCameraStateUpdate(stream.user.userID, extraInfo.isCameraOn)\n            }\n            if ('isMicrophoneOn' in extraInfo) {\n                _onRemoteMicStateUpdate(stream.user.userID, extraInfo.isMicrophoneOn)\n            }\n        } catch (error) {\n            zlogerror('roomStreamExtraInfoUpdate ERROR: ', error)\n        }\n    })\n  });\n  ZegoExpressEngine.instance().on('IMRecvCustomCommand', (roomID, fromUser, command) => {\n    zloginfo('IMRecvCustomCommand', roomID, fromUser, command);\n    _onIMCustomCommandReceived(roomID, fromUser, command);\n  });\n}\nfunction _unregisterEngineCallback() {\n  zloginfo('Unregister callback from ZegoExpressEngine...');\n  ZegoExpressEngine.instance().off('roomUserUpdate');\n  ZegoExpressEngine.instance().off('roomStreamUpdate');\n  ZegoExpressEngine.instance().off('publisherQualityUpdate');\n  ZegoExpressEngine.instance().off('playerQualityUpdate');\n  ZegoExpressEngine.instance().off('remoteCameraStateUpdate');\n  ZegoExpressEngine.instance().off('remoteMicStateUpdate');\n  ZegoExpressEngine.instance().off('playerStateUpdate');\n  ZegoExpressEngine.instance().off('remoteSoundLevelUpdate');\n  ZegoExpressEngine.instance().off('capturedSoundLevelUpdate');\n  ZegoExpressEngine.instance().off('roomStateChanged');\n  ZegoExpressEngine.instance().off('audioRouteChange');\n  ZegoExpressEngine.instance().off('IMRecvBroadcastMessage');\n  ZegoExpressEngine.instance().off('roomExtraInfoUpdate');\n  ZegoExpressEngine.instance().off('roomStreamExtraInfoUpdate');\n  ZegoExpressEngine.instance().off('IMRecvCustomCommand');\n}\nfunction _notifyUserCountOrPropertyChanged(type) {\n  const msg = [\n    '',\n    'user add',\n    'user delete',\n    'mic update',\n    'camera update',\n    'attributes update',\n  ];\n  const userList = Object.values(_coreUserMap)\n    .sort((user1, user2) => {\n      return user2.joinTime - user1.joinTime;\n    })\n    .map((user) => _createPublicUser(user));\n  zloginfo(`_notifyUserCountOrPropertyChanged ${msg[type]}`, userList);\n  Object.keys(_onUserCountOrPropertyChangedCallbackMap).forEach(\n    (callbackID) => {\n      if (_onUserCountOrPropertyChangedCallbackMap[callbackID]) {\n        _onUserCountOrPropertyChangedCallbackMap[callbackID](\n          JSON.parse(JSON.stringify(userList))\n        );\n      }\n    }\n  );\n}\n\n// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Stream Handling <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\nfunction _getUserIDByStreamID(streamID) {\n  // StreamID format: roomid_userid_main\n  for (const userID in _coreUserMap) {\n    if (_coreUserMap[userID].streamID == streamID) {\n      return userID;\n    }\n  }\n  return '';\n}\nfunction _getPublishStreamID() {\n  return _currentRoomID + '_' + _localCoreUser.userID + '_main';\n}\nfunction _getStreamIDByUserID(userID) {\n  return _currentRoomID + '_' + userID + '_main';\n}\nfunction _tryStartPublishStream() {\n  if (_localCoreUser.isMicDeviceOn || _localCoreUser.isCameraDeviceOn) {\n    zloginfo(\n      '_tryStartPublishStream',\n      _localCoreUser.isMicDeviceOn,\n      _localCoreUser.isCameraDeviceOn,\n      _localCoreUser.streamID\n    );\n    if (!_localCoreUser.streamID) {\n      return;\n    }\n    ZegoExpressEngine.instance()\n      .startPublishingStream(_localCoreUser.streamID)\n      .then(() => {\n        zloginfo('Notify local user audioVideoAvailable start', _localCoreUser.streamID + '', JSON.parse(JSON.stringify(_streamCoreUserMap)));\n        // if (_localCoreUser.streamID in _streamCoreUserMap) {\n          _streamCoreUserMap[_localCoreUser.streamID] = _localCoreUser;\n\n          zloginfo('Notify local user audioVideoAvailable end', _localCoreUser);\n          Object.keys(_onAudioVideoAvailableCallbackMap).forEach(\n            (callbackID) => {\n              if (_onAudioVideoAvailableCallbackMap[callbackID]) {\n                _onAudioVideoAvailableCallbackMap[callbackID]([_localCoreUser]);\n              }\n            }\n          );\n        // }\n      });\n    zloginfo('ZegoExpressEngine startPreview:', _localCoreUser);\n    if (_localCoreUser.viewID > 0) {\n      ZegoExpressEngine.instance()\n        .startPreview({\n          reactTag: _localCoreUser.viewID,\n          viewMode: _localCoreUser.fillMode,\n          backgroundColor: 0,\n        })\n        .catch((error) => {\n          zlogerror(error);\n        });\n    }\n  }\n}\nfunction _tryStopPublishStream(force = false) {\n  if (!_localCoreUser.isMicDeviceOn && !_localCoreUser.isCameraDeviceOn) {\n    zloginfo('stopPublishStream');\n    ZegoExpressEngine.instance().stopPublishingStream();\n    ZegoExpressEngine.instance().stopPreview();\n    if (_localCoreUser.streamID in _streamCoreUserMap) {\n      delete _streamCoreUserMap[_localCoreUser.streamID];\n\n      Object.keys(_onAudioVideoUnavailableCallbackMap).forEach((callbackID) => {\n        if (_onAudioVideoUnavailableCallbackMap[callbackID]) {\n          _onAudioVideoUnavailableCallbackMap[callbackID]([_localCoreUser]);\n        }\n      });\n    }\n  }\n}\nfunction _tryStartPlayStream(userID) {\n  if (userID in _coreUserMap) {\n    const user = _coreUserMap[userID];\n    zloginfo(\n      '########_tryStartPlayStream##############: ',\n      user,\n      user.fillMode,\n      _audioVideoResourceMode,\n    );\n    if (user.streamID !== '') {\n      if (user.viewID > 0) {\n        ZegoExpressEngine.instance().startPlayingStream(user.streamID, {\n          reactTag: user.viewID,\n          viewMode: user.fillMode,\n          backgroundColor: 0,\n        }, {\n          resourceMode: _audioVideoResourceMode,\n        });\n      } else {\n        ZegoExpressEngine.instance().startPlayingStream(user.streamID, undefined, {\n          resourceMode: _audioVideoResourceMode,\n        });\n      }\n    }\n  }\n}\nfunction _tryStopPlayStream(userID, force = false) {\n  if (userID in _coreUserMap) {\n    const user = _coreUserMap[userID];\n    if (force || (!user.isMicDeviceOn && !user.isCameraDeviceOn)) {\n      ZegoExpressEngine.instance().stopPlayingStream(user.streamID);\n    }\n  }\n}\nfunction _notifyUserInfoUpdate(userInfo) {\n  Object.keys(_onUserInfoUpdateCallbackMap).forEach((callbackID) => {\n    if (_onUserInfoUpdateCallbackMap[callbackID]) {\n      _onUserInfoUpdateCallbackMap[callbackID](userInfo);\n    }\n  });\n}\nfunction _notifySoundLevelUpdate(userID, soundLevel) {\n  Object.keys(_onSoundLevelUpdateCallbackMap).forEach((callbackID) => {\n    if (_onSoundLevelUpdateCallbackMap[callbackID]) {\n      _onSoundLevelUpdateCallbackMap[callbackID](userID, soundLevel);\n    }\n  });\n}\nfunction _notifyRoomPropertyUpdate(key, oldValue, value, type) {\n  Object.keys(_onRoomPropertyUpdatedCallbackMap).forEach((callbackID) => {\n    if (_onRoomPropertyUpdatedCallbackMap[callbackID]) {\n      _onRoomPropertyUpdatedCallbackMap[callbackID](key, oldValue, value, type);\n    }\n  });\n}\nfunction _notifyRoomPropertiesFullUpdate(keys, oldRoomProperties, roomProperties, type) {\n  Object.keys(_onRoomPropertiesFullUpdatedCallbackMap).forEach((callbackID) => {\n    if (_onRoomPropertiesFullUpdatedCallbackMap[callbackID]) {\n      _onRoomPropertiesFullUpdatedCallbackMap[callbackID](keys, oldRoomProperties, roomProperties, type);\n    }\n  });\n}\nfunction _notifyMeRemovedFromRoom() {\n  Object.keys(_onMeRemovedFromRoomCallbackMap).forEach((callbackID) => {\n    if (_onMeRemovedFromRoomCallbackMap[callbackID]) {\n      _onMeRemovedFromRoomCallbackMap[callbackID]();\n    }\n  });\n}\nconst _isEngineCreated = () => {\n  try {\n    return ZegoExpressEngine.instance() != undefined;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport default {\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Internal <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  isRoomConnected() {\n    return _isRoomConnected;\n  },\n  setAudioVideoResourceMode(audioVideoResourceMode) {\n    zloginfo('setAudioVideoResourceMode', audioVideoResourceMode);\n    _audioVideoResourceMode = audioVideoResourceMode || ZegoAudioVideoResourceMode.Default;\n  },\n  updateRenderingProperty(userID, viewID, fillMode) {\n    zloginfo(\n      'updateRenderingProperty: ',\n      userID,\n      viewID,\n      fillMode,\n      '<<<<<<<<<<<<<<<<<<<<<<<<<<'\n    );\n    if (userID === undefined) {\n      zlogwarning(\n        'updateRenderingProperty: ignore undifine useid. Use empty string for local user.'\n      );\n      return;\n    }\n    if (userID === '') {\n      userID = _localCoreUser.userID;\n    }\n    if (userID in _coreUserMap) {\n      _coreUserMap[userID].viewID = viewID;\n      _coreUserMap[userID].fillMode = fillMode;\n      _notifyUserInfoUpdate(_coreUserMap[userID]);\n\n      if (_localCoreUser.userID == userID) {\n        _localCoreUser.viewID = viewID;\n        _localCoreUser.fillMode = fillMode;\n        if (viewID > 0) {\n          _tryStartPublishStream();\n        } else {\n          _tryStopPublishStream();\n        }\n      } else {\n        // Check if stream is ready to play for remote user\n        if (viewID > 0) {\n          _tryStartPlayStream(userID);\n        }\n      }\n    }\n  },\n  onUserInfoUpdate(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onUserInfoUpdateCallbackMap) {\n        zloginfo(\n          '[onUserInfoUpdate] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onUserInfoUpdateCallbackMap[callbackID];\n      }\n    } else {\n      _onUserInfoUpdateCallbackMap[callbackID] = callback;\n    }\n  },\n  onSoundLevelUpdate(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onSoundLevelUpdateCallbackMap) {\n        zloginfo(\n          '[onSoundLevelUpdate] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onSoundLevelUpdateCallbackMap[callbackID];\n      }\n    } else {\n      _onSoundLevelUpdateCallbackMap[callbackID] = callback;\n    }\n  },\n  onSDKConnected(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onSDKConnectedCallbackMap) {\n        zloginfo(\n          '[onSDKConnected] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onSDKConnectedCallbackMap[callbackID];\n      }\n    } else {\n      _onSDKConnectedCallbackMap[callbackID] = callback;\n    }\n  },\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> SDK <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  connectSDK(appID, appSign, userInfo) {\n    // Solve the problem of repeated initialization\n    if (_isEngineCreated()) {\n      zloginfo('Create ZegoExpressEngine succeed already!');\n\n      \n      _unregisterEngineCallback();\n      _registerEngineCallback();\n\n      Object.keys(_onSDKConnectedCallbackMap).forEach((callbackID) => {\n        // TODO cause  WARN  Possible Unhandled Promise Rejection (id: 56)\n        if (_onSDKConnectedCallbackMap[callbackID]) {\n          _onSDKConnectedCallbackMap[callbackID]();\n        }\n      });\n\n      return Promise.resolve();\n    }\n    return new Promise((resolve, reject) => {\n      // set advancedConfig to monitor remote user's device changed\n      ZegoExpressEngine.setEngineConfig({\n        advancedConfig: {\n          notify_remote_device_unknown_status: 'true',\n          notify_remote_device_init_status: 'true',\n        },\n      });\n      const engineProfile = {\n        appID: appID,\n        appSign: appSign,\n        scenario: 0,\n      };\n      ZegoExpressEngine.createEngineWithProfile(engineProfile)\n        .then((engine) => {\n          zloginfo('Create ZegoExpressEngine succeed!');\n          _appInfo.appID = appID;\n          _appInfo.appSign = appSign;\n          _unregisterEngineCallback();\n          _registerEngineCallback();\n\n          _setLocalUserInfo(userInfo);\n\n          Object.keys(_onSDKConnectedCallbackMap).forEach((callbackID) => {\n            // TODO cause  WARN  Possible Unhandled Promise Rejection (id: 56)\n            if (_onSDKConnectedCallbackMap[callbackID]) {\n              _onSDKConnectedCallbackMap[callbackID]();\n            }\n          });\n          resolve();\n        })\n        .catch((error) => {\n          zlogerror('Create ZegoExpressEngine Failed: ', error);\n          reject(error);\n        });\n    });\n  },\n  disconnectSDK() {\n    return new Promise((resolve, reject) => {\n      if (ZegoExpressEngine.instance()) {\n        ZegoExpressEngine.destroyEngine()\n          .then(() => {\n            zloginfo('Destroy ZegoExpressEngine finished!');\n            resolve();\n          })\n          .catch((error) => {\n            zlogerror('Destroy ZegoExpressEngine failed!', error);\n            reject(error);\n          })\n          .finally(() => {\n            _resetData();\n          });\n      } else {\n        resolve();\n      }\n    });\n  },\n\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Audio Video <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  useFrontFacingCamera(isFrontFacing) {\n    zloginfo('Use front facing camera: ', isFrontFacing);\n    _usingFrontFacingCamera = isFrontFacing;\n    return ZegoExpressEngine.instance().useFrontCamera(isFrontFacing, 0);\n  },\n  isUsingFrontFacingCamera() {\n    return _usingFrontFacingCamera;\n  },\n  isMicDeviceOn(userID) {\n    if (!userID) {\n      return _localCoreUser.isMicDeviceOn;\n    } else if (userID in _coreUserMap) {\n      return _coreUserMap[userID].isMicDeviceOn;\n    } else {\n      zlogwarning(\n        'Can not check mic device is on for user[',\n        userID,\n        '], because no record!'\n      );\n      return true;\n    }\n  },\n  isCameraDeviceOn(userID) {\n    if (!userID) {\n      return _localCoreUser.isCameraDeviceOn;\n    } else if (userID in _coreUserMap) {\n      return _coreUserMap[userID].isCameraDeviceOn;\n    } else {\n      zlogwarning(\n        'No record for user: ',\n        userID,\n        '. Can not check camera device is on.'\n      );\n      return true;\n    }\n  },\n  enableSpeaker(enable) {\n    // TODO\n    return new Promise((resolve, reject) => {\n      if (!_isRoomConnected) {\n        zlogerror('You are not connect to any room.');\n        reject();\n      } else {\n        ZegoExpressEngine.instance().muteSpeaker(!enable);\n        resolve();\n      }\n    });\n  },\n  audioOutputDeviceType() {\n    return _audioOutputType;\n  },\n  turnMicDeviceOn(userID, on) {\n    return _turnMicDeviceOn(userID, on);\n  },\n  turnCameraDeviceOn(userID, on) {\n    return _turnCameraDeviceOn(userID, on);\n  },\n  onMicDeviceOn(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onMicDeviceOnCallbackMap) {\n        zloginfo(\n          '[onMicDeviceOn] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onMicDeviceOnCallbackMap[callbackID];\n      }\n    } else {\n      _onMicDeviceOnCallbackMap[callbackID] = callback;\n    }\n  },\n  onCameraDeviceOn(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onCameraDeviceOnCallbackMap) {\n        zloginfo(\n          '[onCameraDeviceOn] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onCameraDeviceOnCallbackMap[callbackID];\n      }\n    } else {\n      _onCameraDeviceOnCallbackMap[callbackID] = callback;\n    }\n  },\n  setAudioOutputToSpeaker(isSpeaker) {\n    ZegoExpressEngine.instance().setAudioRouteToSpeaker(isSpeaker);\n  },\n  onAudioOutputDeviceTypeChange(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onAudioOutputDeviceTypeChangeCallbackMap) {\n        zloginfo(\n          '[onAudioOutputDeviceTypeChange] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onAudioOutputDeviceTypeChangeCallbackMap[callbackID];\n      }\n    } else {\n      _onAudioOutputDeviceTypeChangeCallbackMap[callbackID] = callback;\n    }\n  },\n  setAudioConfig(config) {\n    // TODO\n  },\n  setVideoConfig(config) {\n    // TODO\n  },\n  onAudioVideoAvailable(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onAudioVideoAvailableCallbackMap) {\n        zloginfo(\n          '[onAudioVideoAvailable] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onAudioVideoAvailableCallbackMap[callbackID];\n      }\n    } else {\n      _onAudioVideoAvailableCallbackMap[callbackID] = callback;\n    }\n  },\n  onAudioVideoUnavailable(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onAudioVideoUnavailableCallbackMap) {\n        zloginfo(\n          '[onAudioVideoUnavailable] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onAudioVideoUnavailableCallbackMap[callbackID];\n      }\n    } else {\n      _onAudioVideoUnavailableCallbackMap[callbackID] = callback;\n    }\n  },\n  startPlayingAllAudioVideo() {\n    ZegoExpressEngine.instance().muteAllPlayStreamAudio(false);\n    ZegoExpressEngine.instance().muteAllPlayStreamVideo(false);\n  },\n  stopPlayingAllAudioVideo() {\n    ZegoExpressEngine.instance().muteAllPlayStreamAudio(true);\n    ZegoExpressEngine.instance().muteAllPlayStreamVideo(true);\n  },\n  onTurnOnYourCameraRequest(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onTurnOnYourCameraRequestCallbackMap) {\n        zloginfo(\n          '[onTurnOnYourCameraRequest] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onTurnOnYourCameraRequestCallbackMap[callbackID];\n      }\n    } else {\n      _onTurnOnYourCameraRequestCallbackMap[callbackID] = callback;\n    }\n  },\n  onTurnOnYourMicrophoneRequest(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onTurnOnYourMicrophoneRequestCallbackMap) {\n        zloginfo(\n          '[onTurnOnYourMicrophoneRequest] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onTurnOnYourMicrophoneRequestCallbackMap[callbackID];\n      }\n    } else {\n      _onTurnOnYourMicrophoneRequestCallbackMap[callbackID] = callback;\n    }\n  },\n\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Room <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  joinRoom(roomID, token, markAsLargeRoom = false) {\n    // Solve the problem of repeated join\n    if (_isRoomConnected && _currentRoomID === roomID) {\n      zloginfo('Join room success already');\n      return Promise.resolve();\n    }\n    return new Promise((resolve, reject) => {\n      const user = {\n        userID: _localCoreUser.userID,\n        userName: _localCoreUser.userName,\n      };\n      const config = { isUserStatusNotify: true };\n      token && (config.token = token);\n      _currentRoomID = roomID;\n      ZegoExpressEngine.instance()\n        .loginRoom(roomID, user, config)\n        .then(() => {\n          zloginfo('Join room success.', user);\n          _roomMemberCount = 1\n          _markAsLargeRoom = markAsLargeRoom;\n          ZegoExpressEngine.instance().startSoundLevelMonitor();\n\n          _localCoreUser.streamID = _getPublishStreamID();\n          _coreUserMap[_localCoreUser.userID] = _localCoreUser;\n          _notifyUserCountOrPropertyChanged(ZegoChangedCountOrProperty.userAdd);\n\n          _tryStartPublishStream()\n\n          resolve();\n        })\n        .catch((error) => {\n          zlogerror('Join room falied: ', error);\n          _currentRoomID = '';\n          reject(error);\n        });\n    });\n  },\n  leaveRoom() {\n    return _leaveRoom();\n  },\n  onRoomStateChanged(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onRoomStateChangedCallbackMap) {\n        zloginfo(\n          '[onRoomStateChanged] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onRoomStateChangedCallbackMap[callbackID];\n      }\n    } else {\n      _onRoomStateChangedCallbackMap[callbackID] = callback;\n    }\n  },\n  onRequireNewToken(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onRequireNewTokenCallbackMap) {\n        zloginfo(\n          '[onRequireNewToken] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onRequireNewTokenCallbackMap[callbackID];\n      }\n    } else {\n      _onRequireNewTokenCallbackMap[callbackID] = callback;\n    }\n  },\n  setRoomProperty(key, value) {\n    if (!_isRoomConnected) {\n      zlogerror('You need to join the room before using this interface!');\n      return;\n    }\n    if (_roomProperties[key] === value) {\n      return;\n    }\n    const oldValue = _roomProperties[key];\n    const oldRoomProperties = JSON.parse(JSON.stringify(_roomProperties));\n    _roomProperties[key] = value;\n    const extraInfo = JSON.stringify(_roomProperties);\n    zloginfo('[updateRoomProperties]Set start', extraInfo);\n    return new Promise((resolve, reject) => {\n      ZegoExpressEngine.instance().setRoomExtraInfo(_currentRoomID, 'extra_info', extraInfo).then(({ errorCode }) => {\n        if (errorCode === 0) {\n          zloginfo('[updateRoomProperties]Set success');\n          resolve();\n          // Notify\n          _notifyRoomPropertyUpdate(key, oldValue, value, ZegoRoomPropertyUpdateType.set);\n          _notifyRoomPropertiesFullUpdate([key], oldRoomProperties, JSON.parse(extraInfo), ZegoRoomPropertyUpdateType.set);\n        } else {\n          // Restore\n          _roomProperties = JSON.parse(JSON.stringify(oldRoomProperties));\n          zlogwarning('[setRoomProperty]Set failed, errorCode: ', errorCode);\n          reject({ code: errorCode });\n        }\n      }).catch((error) => {\n        // Restore\n        _roomProperties = JSON.parse(JSON.stringify(oldRoomProperties));\n        zlogerror('[setRoomProperty]Set error', error);\n        reject(error);\n      });\n    });\n  },\n  updateRoomProperties(newRoomProperties) {\n    if (!_isRoomConnected) {\n      zlogerror('You need to join the room before using this interface!');\n      return Promise.reject();\n    }\n    const updateKeys = [];\n    const oldRoomProperties = JSON.parse(JSON.stringify(_roomProperties));\n    Object.keys(newRoomProperties).forEach((key) => {\n      if (oldRoomProperties[key] !== newRoomProperties[key]) {\n        updateKeys.push(key);\n        _roomProperties[key] = newRoomProperties[key];\n      }\n    })\n    const extraInfo = JSON.stringify(_roomProperties);\n    zloginfo('[updateRoomProperties]Update start', extraInfo);\n    return new Promise((resolve, reject) => {\n      ZegoExpressEngine.instance().setRoomExtraInfo(_currentRoomID, 'extra_info', extraInfo).then(({ errorCode }) => {\n        if (errorCode === 0) {\n          zloginfo('[updateRoomProperties]Update success');\n          resolve();\n          // Notify\n          updateKeys.forEach((updateKey) => {\n            const oldValue = oldRoomProperties[updateKey];\n            const value = newRoomProperties[updateKey];\n            _notifyRoomPropertyUpdate(updateKey, oldValue, value, ZegoRoomPropertyUpdateType.update);\n          })\n          updateKeys.length && _notifyRoomPropertiesFullUpdate(updateKeys, oldRoomProperties, JSON.parse(extraInfo), ZegoRoomPropertyUpdateType.update);\n        } else {\n          // Restore\n          _roomProperties = JSON.parse(JSON.stringify(oldRoomProperties));\n          zlogwarning('[updateRoomProperties]Update failed, errorCode: ', errorCode);\n          reject({ code: errorCode });\n        }\n      }).catch((error) => {\n        // Restore\n        _roomProperties = JSON.parse(JSON.stringify(oldRoomProperties));\n        zlogerror('[updateRoomProperties]Update error', error);\n        reject(error);\n      });\n    });\n  },\n  getRoomProperties() {\n    return _roomProperties;\n  },\n  onRoomPropertyUpdated(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onRoomPropertyUpdatedCallbackMap) {\n        zloginfo(\n          '[onRoomPropertyUpdated] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onRoomPropertyUpdatedCallbackMap[callbackID];\n      }\n    } else {\n      _onRoomPropertyUpdatedCallbackMap[callbackID] = callback;\n    }\n  },\n  onRoomPropertiesFullUpdated(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onRoomPropertiesFullUpdatedCallbackMap) {\n        zloginfo(\n          '[onRoomPropertiesFullUpdated] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onRoomPropertiesFullUpdatedCallbackMap[callbackID];\n      }\n    } else {\n      _onRoomPropertiesFullUpdatedCallbackMap[callbackID] = callback;\n    }\n  },\n  sendInRoomCommand(command, toUserIDs = []) {\n    const toUserList = toUserIDs.map((userID) => {\n      const userInfo = _coreUserMap[userID];\n      const userName = userInfo ? (userInfo.userName || '') : '';\n      return {\n        userID,\n        userName,\n      };\n    });\n    return _sendInRoomCommand(command, toUserList);\n  },\n  onInRoomCommandReceived(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onInRoomCommandReceivedCallbackMap) {\n        zloginfo(\n          '[onInRoomCommandReceived] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onInRoomCommandReceivedCallbackMap[callbackID];\n      }\n    } else {\n      _onInRoomCommandReceivedCallbackMap[callbackID] = callback;\n    }\n  },\n  onMeRemovedFromRoom(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onMeRemovedFromRoomCallbackMap) {\n        zloginfo(\n          '[onMeRemovedFromRoom] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onMeRemovedFromRoomCallbackMap[callbackID];\n      }\n    } else {\n      _onMeRemovedFromRoomCallbackMap[callbackID] = callback;\n    }\n  },\n\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> User <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  connectUser(userID, userName) {\n    _setLocalUserInfo({ userID: userID, userName: userName });\n    // TODO ZIM login\n  },\n  disconnectUser() {\n    delete _coreUserMap[_localCoreUser.userID];\n    _localCoreUser = _createCoreUser('', '', '', {});\n    // TODO ZIM logout\n  },\n  getLocalUserInfo() {\n    return _localCoreUser;\n  },\n  getUser(userID) {\n    return _coreUserMap[userID];\n  },\n  getAllUsers() {\n    const users = Object.values(_coreUserMap);\n    users.sort((a, b) => {\n      return a.joinTime > b.joinTime;\n    });\n    var publicUsers = [];\n    users.forEach((user) => {\n      publicUsers.push(_createPublicUser(user));\n    });\n    return publicUsers;\n  },\n  onUserJoin(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onUserJoinCallbackMap) {\n        zloginfo(\n          '[onUserJoin] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onUserJoinCallbackMap[callbackID];\n      }\n    } else {\n      _onUserJoinCallbackMap[callbackID] = callback;\n    }\n  },\n  onUserLeave(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onUserLeaveCallbackMap) {\n        zloginfo(\n          '[onUserLeave] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onUserLeaveCallbackMap[callbackID];\n      }\n    } else {\n      _onUserLeaveCallbackMap[callbackID] = callback;\n    }\n  },\n  onOnlySelfInRoom(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onOnlySelfInRoomCallbackMap) {\n        zloginfo(\n          '[onOnlySelfInRoom] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onOnlySelfInRoomCallbackMap[callbackID];\n      }\n    } else {\n      _onOnlySelfInRoomCallbackMap[callbackID] = callback;\n    }\n  },\n  onUserCountOrPropertyChanged(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onUserCountOrPropertyChangedCallbackMap) {\n        zloginfo(\n          '[onUserCountOrPropertyChanged] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onUserCountOrPropertyChangedCallbackMap[callbackID];\n      }\n    } else {\n      _onUserCountOrPropertyChangedCallbackMap[callbackID] = callback;\n    }\n  },\n  removeUserFromRoom(userIDs = []) {\n    const command = JSON.stringify({ zego_remove_user: userIDs });\n    const toUserList = (_isLargeRoom || _markAsLargeRoom) ? [] : userIDs.map((userID) => {\n      const userInfo = _coreUserMap[userID];\n      const userName = userInfo ? (userInfo.userName || '') : '';\n      return {\n        userID,\n        userName,\n      };\n    });\n    return _sendInRoomCommand(command, toUserList);\n  },\n\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Message <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  getInRoomMessages() {\n    return _inRoomMessageList;\n  },\n  sendInRoomMessage(message) {\n    return new Promise((resolve, reject) => {\n      ZegoExpressEngine.instance()\n        .sendBroadcastMessage(_currentRoomID, message)\n        .then((result) => {\n          zloginfo('SendInRoomMessage finished.', result);\n          const { errorCode, messageID } = result;\n          if (errorCode > 0) {\n            reject(errorCode);\n          } else {\n            const inRoomMessage = {\n              message: message,\n              messageID: messageID,\n              sendTime: Date.now(),\n              sender: _createPublicUser(_localCoreUser),\n            };\n            _inRoomMessageList.push(inRoomMessage);\n\n            Object.keys(_onInRoomMessageSentCallbackMap).forEach(\n              (callbackID) => {\n                // callback may remove from map during room state chaging\n                if (callbackID in _onInRoomMessageSentCallbackMap) {\n                  if (_onInRoomMessageSentCallbackMap[callbackID]) {\n                    _onInRoomMessageSentCallbackMap[callbackID](\n                      errorCode,\n                      messageID\n                    );\n                  }\n                }\n              }\n            );\n\n            resolve(result);\n          }\n        })\n        .catch((error) => {\n          zlogerror('SendInRoomMessage falied: ', error);\n          reject(error);\n        });\n    });\n  },\n  onInRoomMessageReceived(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onInRoomMessageReceivedCallbackMap) {\n        zloginfo(\n          '[onInRoomMessageReceived] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onInRoomMessageReceivedCallbackMap[callbackID];\n      }\n    } else {\n      _onInRoomMessageReceivedCallbackMap[callbackID] = callback;\n    }\n  },\n  onInRoomMessageSent(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onInRoomMessageSentCallbackMap) {\n        zloginfo(\n          '[onInRoomMessageSent] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onInRoomMessageSentCallbackMap[callbackID];\n      }\n    } else {\n      _onInRoomMessageSentCallbackMap[callbackID] = callback;\n    }\n  },\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Live audio room <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  notifyUserCountOrPropertyChanged(type) {\n    _notifyUserCountOrPropertyChanged(type);\n  },\n  notifyUserInfoUpdate(userID) {\n    _notifyUserInfoUpdate(_coreUserMap[userID]);\n  },\n  // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Force update component <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<\n  forceSortMemberList() {\n    zloginfo('[forceSortMemberList callback]');\n    const userList = Object.values(_coreUserMap)\n      .sort((user1, user2) => {\n        return user2.joinTime - user1.joinTime;\n      })\n      .map((user) => _createPublicUser(user));\n    Object.keys(_onMemberListForceSortCallbackMap).forEach((callbackID) => {\n      if (_onMemberListForceSortCallbackMap[callbackID]) {\n        _onMemberListForceSortCallbackMap[callbackID](userList);\n      }\n    });\n  },\n  onMemberListForceSort(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onMemberListForceSortCallbackMap) {\n        zloginfo(\n          '[onMemberListForceSort] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onMemberListForceSortCallbackMap[callbackID];\n      }\n    } else {\n      _onMemberListForceSortCallbackMap[callbackID] = callback;\n    }\n  },\n  forceSortAudioVideoList() {\n    zloginfo('[forceSortAudioVideoList callback]');\n    Object.keys(_onAudioVideoListForceSortCallbackMap).forEach((callbackID) => {\n      if (_onAudioVideoListForceSortCallbackMap[callbackID]) {\n        _onAudioVideoListForceSortCallbackMap[callbackID]();\n      }\n    });\n  },\n  onAudioVideoListForceSort(callbackID, callback) {\n    if (typeof callback !== 'function') {\n      if (callbackID in _onAudioVideoListForceSortCallbackMap) {\n        zloginfo(\n          '[onAudioVideoListForceSort] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete _onAudioVideoListForceSortCallbackMap[callbackID];\n      }\n    } else {\n      _onAudioVideoListForceSortCallbackMap[callbackID] = callback;\n    }\n  },\n};\n"],"mappings":"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"}