{"version":3,"names":["ZegoToggleMicrophoneButton","props","userID","iconMicOn","iconMicOff","isOn","onPress","width","height","isCurrentOn","setIsCurrentOn","useState","getImageSourceByPath","pathOn","require","pathOff","onButtonPress","ZegoUIKitInternal","turnMicDeviceOn","useEffect","isMicDeviceOn","callbackID","String","Math","floor","random","onSDKConnected","onMicDeviceOn","id","on","undefined","getLocalUserInfo"],"sources":["ZegoToggleMicrophoneButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Image, TouchableOpacity, View } from \"react-native\";\nimport ZegoUIKitInternal from \"../internal/ZegoUIKitInternal\";\n\nexport default function ZegoToggleMicrophoneButton(props) {\n    const { userID, iconMicOn, iconMicOff, isOn, onPress, width = 48, height = 48 } = props;\n    const [isCurrentOn, setIsCurrentOn] = useState(true);// Default on\n    const getImageSourceByPath = () => {\n        const pathOn = iconMicOn ? iconMicOn : require(\"../internal/resources/white_button_mic_on.png\");\n        const pathOff = iconMicOff ? iconMicOff : require(\"../internal/resources/white_button_mic_off.png\");\n        return isCurrentOn ? pathOn : pathOff;\n    }\n    const onButtonPress = () => {\n        ZegoUIKitInternal.turnMicDeviceOn(userID, !isCurrentOn);\n        if (typeof onPress == 'function') {\n            onPress();\n        }\n    }\n\n\n    useEffect(() => {\n        setIsCurrentOn(ZegoUIKitInternal.isMicDeviceOn(userID));\n    });\n    useEffect(() => {\n        const callbackID = 'ZegoToggleMicrophoneButton' + String(Math.floor(Math.random() * 10000));\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            ZegoUIKitInternal.turnMicDeviceOn(userID, isOn);\n            setIsCurrentOn(ZegoUIKitInternal.isMicDeviceOn(userID))\n        });\n        ZegoUIKitInternal.onMicDeviceOn(callbackID, (id, on) => {\n            if (userID === undefined || userID === '') { // local user\n                if (id == ZegoUIKitInternal.getLocalUserInfo().userID) {\n                    setIsCurrentOn(on);\n                }\n            }\n            else if (id == userID) {\n                setIsCurrentOn(on);\n            }\n        });\n        return () => {\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n            ZegoUIKitInternal.onMicDeviceOn(callbackID);\n        }\n    }, [])\n    return (<TouchableOpacity\n        style={{ width: width, height: height }}\n        onPress={onButtonPress}>\n        <Image resizeMode='contain' source={getImageSourceByPath()} style={{ width: \"100%\", height: \"100%\" }} />\n    </TouchableOpacity>)\n}"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEe,SAASA,0BAAT,CAAoCC,KAApC,EAA2C;EACtD,MAAM;IAAEC,MAAF;IAAUC,SAAV;IAAqBC,UAArB;IAAiCC,IAAjC;IAAuCC,OAAvC;IAAgDC,KAAK,GAAG,EAAxD;IAA4DC,MAAM,GAAG;EAArE,IAA4EP,KAAlF;EACA,MAAM,CAACQ,WAAD,EAAcC,cAAd,IAAgC,IAAAC,eAAA,EAAS,IAAT,CAAtC,CAFsD,CAED;;EACrD,MAAMC,oBAAoB,GAAG,MAAM;IAC/B,MAAMC,MAAM,GAAGV,SAAS,GAAGA,SAAH,GAAeW,OAAO,CAAC,+CAAD,CAA9C;IACA,MAAMC,OAAO,GAAGX,UAAU,GAAGA,UAAH,GAAgBU,OAAO,CAAC,gDAAD,CAAjD;IACA,OAAOL,WAAW,GAAGI,MAAH,GAAYE,OAA9B;EACH,CAJD;;EAKA,MAAMC,aAAa,GAAG,MAAM;IACxBC,0BAAA,CAAkBC,eAAlB,CAAkChB,MAAlC,EAA0C,CAACO,WAA3C;;IACA,IAAI,OAAOH,OAAP,IAAkB,UAAtB,EAAkC;MAC9BA,OAAO;IACV;EACJ,CALD;;EAQA,IAAAa,gBAAA,EAAU,MAAM;IACZT,cAAc,CAACO,0BAAA,CAAkBG,aAAlB,CAAgClB,MAAhC,CAAD,CAAd;EACH,CAFD;EAGA,IAAAiB,gBAAA,EAAU,MAAM;IACZ,MAAME,UAAU,GAAG,+BAA+BC,MAAM,CAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAA3B,CAAD,CAAxD;;IACAR,0BAAA,CAAkBS,cAAlB,CAAiCL,UAAjC,EAA6C,MAAM;MAC/CJ,0BAAA,CAAkBC,eAAlB,CAAkChB,MAAlC,EAA0CG,IAA1C;;MACAK,cAAc,CAACO,0BAAA,CAAkBG,aAAlB,CAAgClB,MAAhC,CAAD,CAAd;IACH,CAHD;;IAIAe,0BAAA,CAAkBU,aAAlB,CAAgCN,UAAhC,EAA4C,CAACO,EAAD,EAAKC,EAAL,KAAY;MACpD,IAAI3B,MAAM,KAAK4B,SAAX,IAAwB5B,MAAM,KAAK,EAAvC,EAA2C;QAAE;QACzC,IAAI0B,EAAE,IAAIX,0BAAA,CAAkBc,gBAAlB,GAAqC7B,MAA/C,EAAuD;UACnDQ,cAAc,CAACmB,EAAD,CAAd;QACH;MACJ,CAJD,MAKK,IAAID,EAAE,IAAI1B,MAAV,EAAkB;QACnBQ,cAAc,CAACmB,EAAD,CAAd;MACH;IACJ,CATD;;IAUA,OAAO,MAAM;MACTZ,0BAAA,CAAkBS,cAAlB,CAAiCL,UAAjC;;MACAJ,0BAAA,CAAkBU,aAAlB,CAAgCN,UAAhC;IACH,CAHD;EAIH,CApBD,EAoBG,EApBH;EAqBA,oBAAQ,6BAAC,6BAAD;IACJ,KAAK,EAAE;MAAEd,KAAK,EAAEA,KAAT;MAAgBC,MAAM,EAAEA;IAAxB,CADH;IAEJ,OAAO,EAAEQ;EAFL,gBAGJ,6BAAC,kBAAD;IAAO,UAAU,EAAC,SAAlB;IAA4B,MAAM,EAAEJ,oBAAoB,EAAxD;IAA4D,KAAK,EAAE;MAAEL,KAAK,EAAE,MAAT;MAAiBC,MAAM,EAAE;IAAzB;EAAnE,EAHI,CAAR;AAKH"}