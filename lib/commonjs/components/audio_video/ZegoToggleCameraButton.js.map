{"version":3,"names":["ZegoToggleCameraButton","props","userID","iconCameraOn","iconCameraOff","isOn","onPress","width","height","isCurrentOn","setIsCurrentOn","useState","getImageSourceByPath","pathOn","require","pathOff","onButtonPress","ZegoUIKitInternal","turnCameraDeviceOn","useEffect","isCameraDeviceOn","callbackID","String","Math","floor","random","onCameraDeviceOn","id","on","undefined","getLocalUserInfo","onSDKConnected"],"sources":["ZegoToggleCameraButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Image, TouchableOpacity, View } from \"react-native\";\nimport ZegoUIKitInternal from \"../internal/ZegoUIKitInternal\";\nimport { zloginfo } from \"../../utils/logger\";\n\nexport default function ZegoToggleCameraButton(props) {\n    const { userID, iconCameraOn, iconCameraOff, isOn, onPress, width = 48, height = 48 } = props;\n    const [isCurrentOn, setIsCurrentOn] = useState(true);// Default on\n    const getImageSourceByPath = () => {\n        const pathOn = iconCameraOn ? iconCameraOn : require(\"../internal/resources/white_button_camera_on.png\");\n        const pathOff = iconCameraOff ? iconCameraOff : require(\"../internal/resources/white_button_camera_off.png\");\n        return isCurrentOn ? pathOn : pathOff;\n    }\n    const onButtonPress = () => {\n        ZegoUIKitInternal.turnCameraDeviceOn(userID, !isCurrentOn);\n        if (typeof onPress == 'function') {\n            onPress();\n        }\n    }\n\n    useEffect(() => {\n        setIsCurrentOn(ZegoUIKitInternal.isCameraDeviceOn(userID));\n    });\n    useEffect(() => {\n        const callbackID = 'ZegoToggleCameraButton' + String(Math.floor(Math.random() * 10000));\n        ZegoUIKitInternal.onCameraDeviceOn(callbackID, (id, on) => {\n            if (userID === undefined || userID === '') { // local user\n                if (id == ZegoUIKitInternal.getLocalUserInfo().userID) {\n                    setIsCurrentOn(on);\n                }\n            }\n            else if (id == userID) {\n                setIsCurrentOn(on);\n            }\n        });\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            ZegoUIKitInternal.turnCameraDeviceOn(userID, isOn);\n            setIsCurrentOn(ZegoUIKitInternal.isCameraDeviceOn(userID))\n        });\n        return () => {\n            ZegoUIKitInternal.onCameraDeviceOn(callbackID);\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n        }\n    }, []);\n\n    return (<TouchableOpacity\n        style={{ width: width, height: height }}\n        onPress={onButtonPress}>\n        <Image resizeMode='contain' source={getImageSourceByPath()} style={{ width: \"100%\", height: \"100%\" }} />\n    </TouchableOpacity>)\n}"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEe,SAASA,sBAAT,CAAgCC,KAAhC,EAAuC;EAClD,MAAM;IAAEC,MAAF;IAAUC,YAAV;IAAwBC,aAAxB;IAAuCC,IAAvC;IAA6CC,OAA7C;IAAsDC,KAAK,GAAG,EAA9D;IAAkEC,MAAM,GAAG;EAA3E,IAAkFP,KAAxF;EACA,MAAM,CAACQ,WAAD,EAAcC,cAAd,IAAgC,IAAAC,eAAA,EAAS,IAAT,CAAtC,CAFkD,CAEG;;EACrD,MAAMC,oBAAoB,GAAG,MAAM;IAC/B,MAAMC,MAAM,GAAGV,YAAY,GAAGA,YAAH,GAAkBW,OAAO,CAAC,kDAAD,CAApD;IACA,MAAMC,OAAO,GAAGX,aAAa,GAAGA,aAAH,GAAmBU,OAAO,CAAC,mDAAD,CAAvD;IACA,OAAOL,WAAW,GAAGI,MAAH,GAAYE,OAA9B;EACH,CAJD;;EAKA,MAAMC,aAAa,GAAG,MAAM;IACxBC,0BAAA,CAAkBC,kBAAlB,CAAqChB,MAArC,EAA6C,CAACO,WAA9C;;IACA,IAAI,OAAOH,OAAP,IAAkB,UAAtB,EAAkC;MAC9BA,OAAO;IACV;EACJ,CALD;;EAOA,IAAAa,gBAAA,EAAU,MAAM;IACZT,cAAc,CAACO,0BAAA,CAAkBG,gBAAlB,CAAmClB,MAAnC,CAAD,CAAd;EACH,CAFD;EAGA,IAAAiB,gBAAA,EAAU,MAAM;IACZ,MAAME,UAAU,GAAG,2BAA2BC,MAAM,CAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAA3B,CAAD,CAApD;;IACAR,0BAAA,CAAkBS,gBAAlB,CAAmCL,UAAnC,EAA+C,CAACM,EAAD,EAAKC,EAAL,KAAY;MACvD,IAAI1B,MAAM,KAAK2B,SAAX,IAAwB3B,MAAM,KAAK,EAAvC,EAA2C;QAAE;QACzC,IAAIyB,EAAE,IAAIV,0BAAA,CAAkBa,gBAAlB,GAAqC5B,MAA/C,EAAuD;UACnDQ,cAAc,CAACkB,EAAD,CAAd;QACH;MACJ,CAJD,MAKK,IAAID,EAAE,IAAIzB,MAAV,EAAkB;QACnBQ,cAAc,CAACkB,EAAD,CAAd;MACH;IACJ,CATD;;IAUAX,0BAAA,CAAkBc,cAAlB,CAAiCV,UAAjC,EAA6C,MAAM;MAC/CJ,0BAAA,CAAkBC,kBAAlB,CAAqChB,MAArC,EAA6CG,IAA7C;;MACAK,cAAc,CAACO,0BAAA,CAAkBG,gBAAlB,CAAmClB,MAAnC,CAAD,CAAd;IACH,CAHD;;IAIA,OAAO,MAAM;MACTe,0BAAA,CAAkBS,gBAAlB,CAAmCL,UAAnC;;MACAJ,0BAAA,CAAkBc,cAAlB,CAAiCV,UAAjC;IACH,CAHD;EAIH,CApBD,EAoBG,EApBH;EAsBA,oBAAQ,6BAAC,6BAAD;IACJ,KAAK,EAAE;MAAEd,KAAK,EAAEA,KAAT;MAAgBC,MAAM,EAAEA;IAAxB,CADH;IAEJ,OAAO,EAAEQ;EAFL,gBAGJ,6BAAC,kBAAD;IAAO,UAAU,EAAC,SAAlB;IAA4B,MAAM,EAAEJ,oBAAoB,EAAxD;IAA4D,KAAK,EAAE;MAAEL,KAAK,EAAE,MAAT;MAAiBC,MAAM,EAAE;IAAzB;EAAnE,EAHI,CAAR;AAKH"}